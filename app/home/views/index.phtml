<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="/favicon.ico">
    <title><?=isset($__title)?$__title:"ERP"?> - ASA</title>
    <script src="https://unpkg.com/vue@2.6.9/dist/vue.js"></script>
    <script src="https://unpkg.com/vuex@3.1.0/dist/vuex.js"></script>
    <script src="https://unpkg.com/vue-router@2.0.0/dist/vue-router.js"></script>
    

    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ramda/0.25.0/ramda.min.js"></script>
    <script src="/js/jquery.min.js"></script>
    <script src="/common/systemlanguage?<?=$__sytem_time?>"></script>
    <script src="/js/erp.js?<?=$__sytem_time?>"></script>
    <script src="/js/asa.js?<?=$__sytem_time?>"></script>
    <script src="/js/props.js?<?=$__sytem_time?>"></script>
  </head>

  <style>
  .el-row {
    margin-bottom: 20px;
    &:last-child {
      margin-bottom: 0;
    }
  }

  .bg-purple-dark {
    background: #99a9bf;
  }
  .bg-purple {
    background: #d3dce6;
  }
  .bg-purple-light {
    background: #e5e9f2;
  }
  .grid-content {
    border-radius: 4px;
    min-height: 36px;
  }
  .row-bg {
    padding: 10px 0;
    background-color: #f9fafc;
  }
  
  .el-menu-item a {
    color:white;
    text-decoration : none  
  }
  
  #ell{margin:5px;}
</style>
<body>

  <div id="app">    
    <router-view></router-view>
  </div>

<script>
$(document).ready(function(){
    const routes = [
        {
            path: '/', component: "asapage-home",
            children:[
                {path: '/order', component: "asapage-order"},
                {path: '/sales', component: "asapage-sales"},
                {path: '/user', component: "asapage-user"},
                {path: '/group', component: "asapage-group"},
                {path: '/department', component: "asapage-department"},
                {path: '/brand', component: "asapage-brand"},
                {path: '/brandgroup', component: "asapage-brandgroup"},
                {path: '/sizetop', component: "asapage-sizetop"},
                {path: '/product', component: "asapage-product"},                
                {path:'/ageseason', component:$ASA.getComponentSimple("ageseason")},
                {path:'/ulnarinch', component:$ASA.getComponent("ulnarinch")},
                {path:'/winterproofing', component:$ASA.getComponent("winterproofing")},
                {path:'/washinginstructions', component:$ASA.getComponent("washinginstructions")},
                {path:'/securitycategory', component:$ASA.getComponent("securitycategory")},
                {path:'/executioncategory', component:$ASA.getComponent("executioncategory")},
                {path:'/closedway', component:$ASA.getComponent("closedway")},
                {path:'/occasionsstyle', component:$ASA.getComponent("occasionsstyle")},
                {path:'/productparts', component:$ASA.getComponent("productparts")},
                {path:'/productinnards', component:$ASA.getComponent("productinnards")},
                {path:'/warehouse', component:$ASA.getComponentSimple("warehouse")},
                {path:'/country', component:$ASA.getComponent("country")},
                {path:'/materialnote', component:$ASA.getComponent("materialnote")},
                {path:'/materialstatus', component:$ASA.getComponent("materialstatus")},
                {path:'/material', component:$ASA.getComponent("material")},
                {path:'/producttemplate', component:"asapage-producttemplate"},
                {path:'/member', component:$ASA.getComponentSimple("member")},
                {path:'/colortemplate', component:$ASA.getComponent("colortemplate")},
                {path:'/supplier', component:$ASA.getComponentSimple("supplier")}
            ]
        },
        {path: '/login/:action', component: "asapage-login"},
        {path: '/login', redirect: { path: '/login/login' }}
    ]

    const router = new VueRouter({
        routes // (缩写) 相当于 routes: routes
    })

    const store = new Vuex.Store({
      state: {
          auth:{}
      },
      getters: {
          is_login(state) {
              var auth = state.auth
              if( auth['id'] && auth['id']>0) {
                  return true;
              }
              else {
                  return false;
              }
          }
      },
      mutations:{
          login(state,payload) {
              state.auth = payload.auth;
          },
          logout(state,payload) {
              state.auth = {}
          }
      }
    })

    const app = new Vue({
        router,
        store,
        mounted:function(){
          //console.log(this.$options.components)
        }
    }).$mount('#app')
    
})
</script>
  </body>
</html>
