<!-- BEGIN FOOTER -->
<div class="footer">
    <div class="container">
        <div class="row">
            <!-- BEGIN COPYRIGHT -->
            <div class="col-md-6 col-sm-6 text-left footer-text-left">
                2019 © ASA. ALL Rights Reserved.
            </div>
            <!-- END COPYRIGHT -->

            <!-- BEGIN POWERED -->
            <div class="col-md-6 col-sm-6 text-right">
                <p class="powered">Powered by: <a href="http://www.keenthemes.com/">KeenThemes.com</a></p>
            </div>
            <!-- END POWERED -->
        </div>
    </div>
</div>
<!-- END FOOTER -->

<!-- Load javascripts at bottom, this will reduce page load time -->
<!-- BEGIN CORE PLUGINS(REQUIRED FOR ALL PAGES) -->
<!--[if lt IE 9]>
<script src="/shop/assets/plugins/respond.min.js"></script>
<![endif]-->
<script src="/shop/assets/plugins/jquery.min.js" type="text/javascript"></script>
<script src="/shop/assets/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<script src="/shop/assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/shop/assets/corporate/scripts/back-to-top.js" type="text/javascript"></script>
<script src="/shop/assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->

<!-- BEGIN PAGE LEVEL JAVASCRIPTS (REQUIRED ONLY FOR CURRENT PAGE) -->
<script src="/shop/assets/plugins/fancybox/source/jquery.fancybox.pack.js"
        type="text/javascript"></script><!-- pop up -->
<script src="/shop/assets/plugins/owl.carousel/owl.carousel.min.js"
        type="text/javascript"></script><!-- slider for products -->
<script src='/shop/assets/plugins/zoom/jquery.zoom.min.js' type="text/javascript"></script><!-- product zoom -->
<script src="/shop/assets/plugins/bootstrap-touchspin/bootstrap.touchspin.js"
        type="text/javascript"></script><!-- Quantity -->
<script src="/shop/assets/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
<script src="/shop/assets/plugins/rateit/src/jquery.rateit.js" type="text/javascript"></script>

<script src="/shop/assets/corporate/scripts/layout.js" type="text/javascript"></script>
<!-- 加入layer实现简易弹窗 -->
<script src="/shop/assets/static/js/layer_mobile/layer.js"></script>
<script src="/shop/assets/custom/bootstrap-submenu.js"></script>
<script src="/shop/assets/custom/script.js" type="text/javascript"></script>
<!-- END PAGE LEVEL JAVASCRIPTS -->

<script>
    /**
     * 删除指定商品的购物车
     * @param obj 当前节点
     * @param id 当前购物车的对应id
     */
    function delheadergoods(obj, id) {
        // 取出ul节点
        var li = $(obj).parent();
        var ul = $('.scroller');
        // 逻辑
        $.post('/buycar/deletecar/' + id, function (response) {
            // 判断是否成功
            if (response.messages.length > 0) {
                // 有错误信息，失败了
                layer.open({
                    content: result.messages[0],
                    btn: "<?php echo $this->obj->getValidateMessage('iknow'); ?>"
                });
            } else {
                // 没有错误信息，成功
                // 直接删除原来的节点即可，同时添加动画效果
                li.fadeTo("slow", 0.01, function () {
                    $(this).slideUp("slow", function () {
                        // 执行删除
                        $(this).remove();
                        // 监控是否还有li节点，如果不存在则直接跳转到空购物车页面
                        if (ul.children('li[class="buycar-list"]').length === 0) {
                            window.location.href = '/buycar';
                        }
                    });
                });
            }
        }, 'json');
    }

    /**
     * 主动取消指定id的订单
     * @param id
     */
    function cancle_order(id) {
        // 询问框
        layer.open({
            content: "<?php echo $this->obj->getValidateMessage('confirm-cancle-order'); ?>",
            btn: ["<?php echo $this->obj->getValidateMessage('yes'); ?>", "<?php echo $this->obj->getValidateMessage('no'); ?>"],
            yes: function (index) {
                // ajax取消订单
                $.post('/order/cancle/' + id + '/1', {}, function (response) {
                    // 判断是否有错误
                    if (response.messages.length > 0) {
                        layer.open({
                            content: response.messages[0],
                            btn: "<?php echo $this->obj->getValidateMessage('iknow'); ?>"
                        });
                    } else {
                        //提示
                        layer.open({
                            content: "<?php echo $this->obj->getValidateMessage('success'); ?>",
                            btn: "<?php echo $this->obj->getValidateMessage('please-wait'); ?>",
                            time: 3, // 3秒后自动跳转
                        });
                        // 1秒后跳转
                        setTimeout(function () {
                            window.location.reload();
                        }, 1000);
                    }
                }, 'json');
                // 关闭弹出层
                layer.close(index);
            }
        });
    }
</script>


