!function(e){function t(o){if(a[o])return a[o].exports;var n=a[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,o){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=141)}({0:function(e,t,a){"use strict";a.d(t,"e",function(){return p}),a.d(t,"d",function(){return b}),a.d(t,"f",function(){return d}),a.d(t,"c",function(){return c}),a.d(t,"b",function(){return g}),a.d(t,"a",function(){return h});var o=a(2),n=(a(6),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),l={},r=$ASA.$;l.caches={},l.get=function(e,t){if(l.caches[e])if(0==l.caches[e].loaded){!function a(){console.log("===================",e),l.caches[e]&&1==l.caches[e].loaded?t(l.caches[e].data):setTimeout(a,50)}()}else t(l.caches[e].data);else l.caches[e]={loaded:!1},$ASA.get(e,function(a){l.caches[e].loaded=!0,l.caches[e].data=a,t(a)},"json")},l.getLabel=function(e){return"undefined"!=typeof $ASAL&&$ASAL[e]?$ASAL[e]:""},l.extend=Object.assign,l.logger=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift("old <"+e+">"),console.log.apply(console,t)}};var i={list:{},temp:{},result:{},loading:!1};l.getFetcher=function(e){i.list[e]||(i.list[e]={},i.temp[e]={},i.result[e]={});i.list[e],i.temp[e],i.result[e];return function(t,a){i.result[e][t]?a(i.result[e][t]):(i.loading?i.temp[e][t]=1:i.list[e][t]=1,setTimeout(function o(){if(i.result[e][t])a(i.result[e][t]);else if(i.loading)setTimeout(o,100);else{i.loading=!0;var n={};Object.keys(i.list).forEach(function(e){n[e]=Object.keys(i.list[e])}),$ASA.post("/common/loadname",{params:JSON.stringify(n)},function(o){Object.keys(o).forEach(function(e){var t=o[e];i.result[e]=Object.assign(i.result[e],t),i.list[e]=i.temp[e],i.temp[e]={}}),i.loading=!1,a(i.result[e][t])},"json")}},100))}},l.getLabelFetcher=function(e){var t=l.getFetcher(e);return function(e,a,o){var n=e.split(",").map(function(e){return new Promise(function(a,o){t(e,a)})});Promise.all(n).then(function(e){self.loading=!1,o(e.map(function(e){return e[a]}).join(","))})}};var u=function(e){return{get:function(e,t,a){var o=this;a=a||0,"object"==(void 0===e?"undefined":n(e))?a<=0?t(e):o.init(a,e,t):o.fetch(a,e,t)},fetch:function(t,a,o){var n=this;l.getFetcher(e)(a,function(e){t<=0?o(e):n.init(t,e,o)})},init:function(e,t,a){a(t)}}},s=u("warehouse"),c=r.extend(u("product"),{init:function(e,t,a){var n=[],r=o.a.getDataSource("sizecontent",l.getLabel("lang"));n.push(new Promise(function(e){r.filter({topid:t.sizetopid},e)})),Promise.all(n).then(function(e){t.sizecontents=e[0],a(t)})}}),p=r.extend(u("product"),{init:function(e,t,a){var n=[],r=o.a.getDataSource("sizecontent",l.getLabel("lang"));n.push(new Promise(function(e){r.filter({topid:t.sizetopid},e)}));var i=o.a.getDataSource("childproductgroup",l.getLabel("lang"));n.push(new Promise(function(e){i.getRowLabel(t.childbrand,e)}));var u=o.a.getDataSource("brandgroup",l.getLabel("lang"));n.push(new Promise(function(e){u.getRowLabel(t.brandgroupid,e)}));var s=o.a.getDataSource("country",l.getLabel("lang"));n.push(new Promise(function(e){s.getRowLabels(t.countries,e)}));var c=o.a.getDataSource("colortemplate",l.getLabel("lang"));n.push(new Promise(function(e){c.getRowLabels(t.brandcolor,e)}));var p=o.a.getDataSource("executioncategory",l.getLabel("lang"));n.push(new Promise(function(e){p.getRowLabels(t.executioncategory,e)}));var f=o.a.getDataSource("securitycategory",l.getLabel("lang"));n.push(new Promise(function(e){f.getRowLabels(t.securitycategory,e)}));var d=o.a.getDataSource("season",l.getLabel("lang"));n.push(new Promise(function(e){d.getRowLabels(t.season,e)}));var g=o.a.getDataSource("ageseason",l.getLabel("lang"));n.push(new Promise(function(e){g.getRowLabels(t.ageseason,e)}));var h=o.a.getDataSource("materialstatus",l.getLabel("lang"));n.push(new Promise(function(e){h.getRowLabels(t.materialstatus,e)}));var b=o.a.getDataSource("occasionsstyle",l.getLabel("lang"));n.push(new Promise(function(e){b.getRowLabels(t.occasion,e)})),Promise.all(n).then(function(e){t.sizecontents=e[0],t.childbrand_label=e[1],t.brandgroup_label=e[2],t.countries_label=e[3],t.brandcolor_label=e[4],t.executioncategory_label=e[5],t.securitycategory_label=e[6],t.season_label=e[7],t.ageseason_label=e[8],t.materialstatus_label=e[9],t.occasion_label=e[10],a(t)})}}),f=u("goods"),d=r.extend(u("productstock"),{init:function(e,t,a){var n=[];n.push(new Promise(function(a){c.get(t.productid,a,e-1)})),n.push(new Promise(function(a){s.get(t.warehouseid,a,e-1)}));var r=o.a.getDataSource("sizecontent",l.getLabel("lang"));n.push(new Promise(function(e){r.getRow(t.sizecontentid,function(t){e(t)})})),n.push(new Promise(function(a){f.get(t.goodsid,a,e-1)})),Promise.all(n).then(function(e){t.product=e[0],t.warehouse=e[1],t.sizecontent=e[2],t.goods=e[3],a(t)})}}),g=r.extend(u("orderdetails"),{init:function(e,t,a){var n=[];n.push(new Promise(function(a){c.get(t.productid,a,e-1)}));var r=o.a.getDataSource("sizecontent",l.getLabel("lang"));n.push(new Promise(function(e){r.getRow(t.sizecontentid,function(t){e(t)})})),Promise.all(n).then(function(e){t.product=e[0],t.sizecontent=e[1],a(t)})}}),h=r.extend(u("confirmorderdetails"),{init:function(e,t,a){var o=[];o.push(new Promise(function(a){g.get(t.orderdetailsid,a,e-1)})),Promise.all(o).then(function(e){t.orderdetails=e[0],a(t)})}}),b=function(e,t){$ASA.post("/product/codelist",{id:e},function(e){t(e.data)},"json")};t.g=l},141:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(2),n=a(0);"undefined"!=typeof window&&(void 0===window.ASAP&&(window.ASAP={}),window.ASAP.getLabel=function(e,t,a,n){o.a.getDataSource(e,t).getRowLabels(a,n)},window.ASAP.product=function(e,t){n.e.get(e,t,1)}),t.default={}},2:function(e,t,a){"use strict";function o(e,t){var a=this;a.row=e,a.dataSource=t}function n(e,t){var a=this;a.lang=t,a.data=[],a.hashtable={},a.options=e,a.oplabel=e.oplabel||"name",a.opvalue=e.opvalue||"value",a.is_loaded=!1}var l=a(0),r=a(8),i=(l.g.logger("DataSource"),{});o.prototype.getKeyValue=function(){var e=this.dataSource.getValueName();return this.row[e]},o.prototype.getLabelValue=function(){var e=this,t=e.dataSource.getLabelName(),a=e.dataSource.getLang();return e.row[t]||e.row[t+"_"+a]},o.prototype.getLabel=o.prototype.getLabelValue,o.prototype.getValue=o.prototype.getKeyValue,o.prototype.getRow=function(e){return e?this.row[e]:this.row},o.prototype.getObject=function(){return{id:this.getValue(),name:this.getLabel()}},n.prototype.init=function(){var e=this,t=e.options;t.url?e.loadList():t.hashlist?(Object.keys(t.hashlist).forEach(function(a){var n=new o(t.hashlist[a],e);e.data.push(n),e.hashtable[a]=n}),e.is_loaded=!0):t.hashtable?(Object.keys(t.hashtable).forEach(function(a){var n=new o({name:t.hashtable[a],value:a},e);e.data.push(n),e.hashtable[a]=n}),e.oplabel="name",e.opvalue="value",e.is_loaded=!0):t.datalist&&(t.datalist.forEach(function(t){var a=new o(t,e);e.hashtable[t[e.opvalue]]=a,e.data.push(a)}),e.is_loaded=!0)},n.prototype.loadList=function(){var e=this,t=e.options;t.params;l.g.get(t.url,function(t){t.data.forEach(function(t){var a=new o(t,e);e.hashtable[t[e.opvalue]]=a,e.data.push(a)}),e.is_loaded=!0},"json")},n.prototype.getData=function(e){var t=this;!function a(){t.is_loaded?e(t.data):setTimeout(a,50)}()},n.prototype.filter=function(e,t){this.getData(function(a){var o=Object.keys(e),n=a.filter(function(t){return o.every(function(a){return e[a]==t.getRow(a)})});t(n)})},n.prototype.sub=function(e,t){var a=this;a.getData(function(o){var l=Object.keys(e),r=o.filter(function(t){return l.every(function(a){return e[a]==t.getRow(a)})}),r=r.map(function(e){return e.getRow()}),i=new n({datalist:r,oplabel:a.oplabel,opvalue:a.opvalue},a.lang);i.init(),t(i)})},n.prototype.getLabelName=function(e){return this.oplabel},n.prototype.getValueName=function(e){return this.opvalue},n.prototype.setLang=function(e){this.lang=e},n.prototype.getLang=function(){return this.lang},n.prototype.setLabelName=function(e){this.oplabel=e},n.prototype.getLabelList=function(e,t){this.getData(function(a){var o=e.map(function(e){return a.find(function(t){return e==t.getValue()})}).filter(function(e){return e}).map(function(e){return e.getLabel()});t(o)})},n.prototype.getRow=function(e,t){var a=this;!function o(){a.is_loaded?t(a.hashtable[e]):setTimeout(o,50)}()},n.prototype.getRowLabel=function(e,t){this.getRow(e,function(e){t(e?e.getLabelValue():"")})},n.prototype.getRowLabels=function(e,t){e="string"==typeof e?e.split(","):e,this.getLabelList(e,function(e){t(e.join(","))})},n.getDataSource=function(e,t){if(e.constructor==n)return e;if(i[e])return i[e].setLang(t),i[e];return"string"==typeof e?function(){if(!r.a[e])throw"资源未定义:"+e;return i[e]=new n(r.a[e],t),i[e].init(),i[e]}():function(){return new n(r.a[e],t)}()},t.a=n},6:function(e,t,a){"use strict";var o=function(e){this.getList=function(){return e}};o.prototype.findIndex=function(e,t){return this.getList().findIndex(function(a){if("string"==typeof e)return a[e]==t;for(var o=0;o<e.length;o++)if(a[e[o][0]]!=e[1])return!1;return!0})},t.a=o},8:function(e,t,a){"use strict";var o={};"undefined"==typeof $ASAL&&($ASAL={}),o["test.hashtable"]={hashtable:{SS:"春夏",FW:"秋冬",XX:"经典"}},o["test.hashlist"]={hashlist:{SS:{tname:"春夏",tvalue:"SS"},FW:{tname:"秋冬",tvalue:"FW"},XX:{tname:"经典",tvalue:"XX"}},oplabel:"tname",opvalue:"tvalue"},o["test.datalist"]={datalist:[{tname:"春夏",tvalue:"SS"},{tname:"秋冬",tvalue:"FW"},{tname:"经典",tvalue:"XX"}],oplabel:"tname",opvalue:"tvalue"},o.brand={url:"/l/brand",oplabel:"name",opvalue:"id"},o.country={url:"/l/country",oplabel:"name",opvalue:"id"},o.colortemplate={url:"/l/colortemplate",oplabel:"name",opvalue:"id"},o.brandgroup={url:"/l/brandgroup",oplabel:"name",opvalue:"id"},o.group={url:"/l/group",oplabel:"group_name",opvalue:"id"},o.user={url:"/l/user",oplabel:"login_name",opvalue:"id"},o["department.single"]={url:"/department/single",oplabel:"label",opvalue:"id"},o.childproductgroup={url:"/l/childproductgroup",oplabel:"name",opvalue:"id"},o.materialstatus={url:"/l/materialstatus",oplabel:"name",opvalue:"id"},o.occasionsstyle={url:"/l/occasionsstyle",oplabel:"name",opvalue:"id"},o.ulnarinch={url:"/l/ulnarinch",oplabel:"name",opvalue:"id"},o.ageseason={url:"/l/ageseason",oplabel:"fullname",opvalue:"id"},o.aliases={url:"/l/aliases",oplabel:"name",opvalue:"id"},o.winterproofing={url:"/l/winterproofing",oplabel:"name",opvalue:"id"},o.sizetop={url:"/l/sizetop",oplabel:"name",opvalue:"id"},o.sizecontent={url:"/l/sizecontent",oplabel:"content",opvalue:"id"},o.member={url:"/l/member",oplabel:"name",opvalue:"id"},o.executioncategory={url:"/l/executioncategory",oplabel:"name",opvalue:"id"},o.securitycategory={url:"/l/securitycategory",oplabel:"name",opvalue:"id"},o.warehouse={url:"/l/warehouse",oplabel:"name",opvalue:"id"},o.supplier={url:"/l/supplier",oplabel:"suppliername",opvalue:"id"},o.saleport={url:"/l/saleport",oplabel:"name",opvalue:"id"},o.usersaleport={url:"/user/saleportlist",oplabel:"name",opvalue:"id"},o.userwarehouse={url:"/warehouse/userlist",oplabel:"name",opvalue:"id"},o.gender={hashtable:$ASAL.list_gender},o.gender2={hashtable:$ASAL.list_gender2},o.currency={hashlist:$ASAL.list_currency,oplabel:"name",opvalue:"id"},o.season={hashtable:$ASAL.list_season},o.orderproperty={hashtable:$ASAL.list_orderproperty},o.bussinesstype={hashlist:$ASAL.list_bussinesstype,oplabel:"name",opvalue:"id"},o.sessionmark={hashtable:{SS:"SS",FW:"FW",XX:"XX"}},o.seasontype={hashtable:{0:"Pre",1:"Main",2:"Fashion"}},o.formtype={hashtable:$ASAL.list_formtype},o.languages={hashlist:$ASAL.list_languages,oplabel:"name",opvalue:"code"},o.pickingtype={hashtable:$ASAL.list_pickingtype},o.expresspaidtype={hashtable:$ASAL.list_expresspaidtype},o.transporttype={hashtable:$ASAL.list_transporttype},o.paytype={hashtable:$ASAL.list_paytype},o.salestatus={hashtable:$ASAL.list_salestatus},o.orderstatus={hashtable:$ASAL.list_ordertatus},o.confirmstatusstatus={hashtable:$ASAL.list_confirmstatusstatus},o.requisitiontype={hashtable:$ASAL.list_requisitiontype},o.requisitionstatus={hashtable:$ASAL.list_requisitionstatus},o.warehouserole={hashtable:$ASAL.list_warehouserole},t.a=o}});
//# sourceMappingURL=shop.js.map