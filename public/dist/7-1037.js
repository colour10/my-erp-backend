webpackJsonp([7],{304:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(361),o=r(409),i=r(0),a=i(n.a,o.a,!1,null,null,null);t.default=a.exports},321:function(e,t,r){"use strict";t.__esModule=!0;var n=r(322),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,o.default)(e)}},322:function(e,t,r){e.exports={default:r(323),__esModule:!0}},323:function(e,t,r){r(28),r(324),e.exports=r(2).Array.from},324:function(e,t,r){"use strict";var n=r(27),o=r(9),i=r(40),a=r(75),c=r(76),s=r(56),u=r(325),l=r(57);o(o.S+o.F*!r(77)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,d,p=i(e),f="function"==typeof this?this:Array,h=arguments.length,b=h>1?arguments[1]:void 0,m=void 0!==b,v=0,w=l(p);if(m&&(b=n(b,h>2?arguments[2]:void 0,2)),void 0==w||f==Array&&c(w))for(t=s(p.length),r=new f(t);t>v;v++)u(r,v,m?b(p[v],v):p[v]);else for(d=w.call(p),r=new f;!(o=d.next()).done;v++)u(r,v,m?a(d,b,[o.value,v],!0):o.value);return r.length=v,r}})},325:function(e,t,r){"use strict";var n=r(12),o=r(29);e.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},331:function(e,t,r){"use strict";var n=r(26),o=r.n(n),i=r(10),a=r.n(i),c=r(39),s=r.n(c),u=r(321),l=r.n(u),d=r(11),p=r.n(d);r(36);t.a={name:"asa-product-modify-price",props:{},data:function(){return{products:[],prices:[]}},methods:{show:function(e){var t=this;return p()(a.a.mark(function r(){var n,o,i,c,u,d,p,f,h;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t,0!=e.length){r.next=3;break}return r.abrupt("return");case 3:if(o.products=[],(n=o.products).push.apply(n,l()(e)),o._showDialog("dialog"),0!=o.prices.length){r.next=29;break}return r.next=9,o._dataSource("price").getList();case 9:for(i=r.sent,c=!0,u=!1,d=void 0,r.prev=13,p=s()(i);!(c=(f=p.next()).done);c=!0)h=f.value,o.prices.push({id:h.id,name:h.name,price:"",discount:"",discountCost:""});r.next=21;break;case 17:r.prev=17,r.t0=r.catch(13),u=!0,d=r.t0;case 21:r.prev=21,r.prev=22,!c&&p.return&&p.return();case 24:if(r.prev=24,!u){r.next=27;break}throw d;case 27:return r.finish(24);case 28:return r.finish(21);case 29:case"end":return r.stop()}},r,t,[[13,17,21,29],[22,,24,28]])}))()},save:function(){var e=this,t={products:e.products.join(","),prices:e.prices.filter(function(e){return e.price>0||e.discount>0||e.discountCost>0})};console.log(o()(t)),e._submit("/product/modifyprices",{params:o()(t)})},onKeyUp:function(e,t,r){var n=this;"ArrowRight"===e.key?n.focus(t+1,r):"ArrowLeft"===e.key?n.focus(t-1,r):"ArrowUp"===e.key?n.focus(t,r-1):"ArrowDown"===e.key&&n.focus(t,r+1)},focus:function(e,t){var r=this;if(!(e>3||e<=0||t<0||t>=r.prices.length)){var n=e+"-"+t;r.$refs[n]&&(r.$refs[n].focus(),r.$refs[n].select())}}},computed:{},mounted:function(){}}},337:function(e,t,r){"use strict";var n=r(331),o=r(338),i=r(0),a=i(n.a,o.a,!1,null,null,null);t.a=a.exports},338:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("sp-dialog",{ref:"dialog",attrs:{width:"600"}},[r("el-table",{ref:"tabledetail",staticStyle:{width:"100%"},attrs:{data:e.prices,stripe:"",border:""}},[r("el-table-column",{attrs:{label:e._label("mingcheng"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(r.name)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"label",label:e._label("jiage"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,o=t.$index;return[r("el-input",{ref:"1-"+o,attrs:{size:"mini"},nativeOn:{keyup:function(t){return e.onKeyUp(t,1,o)}},model:{value:n.price,callback:function(t){e.$set(n,"price",t)},expression:"row.price"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"label",label:e._label("lingshoujiaxishu"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,o=t.$index;return[r("el-input",{ref:"2-"+o,attrs:{size:"mini"},nativeOn:{keyup:function(t){return e.onKeyUp(t,2,o)}},model:{value:n.discount,callback:function(t){e.$set(n,"discount",t)},expression:"row.discount"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"label",label:e._label("chengbenxishu"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,o=t.$index;return[r("el-input",{ref:"3-"+o,attrs:{size:"mini"},nativeOn:{keyup:function(t){return e.onKeyUp(t,3,o)}},model:{value:n.discountCost,callback:function(t){e.$set(n,"discountCost",t)},expression:"row.discountCost"}})]}}])})],1),e._v(" "),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{align:"center"}},[r("as-button",{attrs:{auth:"product",type:"primary"},on:{click:e.save}},[e._v(e._s(e._label("baocun")))]),e._v(" "),r("as-button",{attrs:{type:"primary"},on:{click:function(t){return e._hideDialog("dialog")}}},[e._v(e._s(e._label("tuichu")))])],1)],1)],1)},o=[],i={render:n,staticRenderFns:o};t.a=i},361:function(e,t,r){"use strict";var n=r(182),o=r.n(n),i=r(1),a=r(131),c=r(190),s=r(191),u=r(35),l=r(337);t.a={name:"sp-product",components:o()({product:a.a,productadd:c.a},l.a.name,l.a),data:function(){return{selected:[],form:{},props:{columns:[{name:"picture",label:Object(i.d)("zhutu"),is_image:!0,image_width:50,image_height:50,width:60,className:"picture"},{name:"picture2",label:Object(i.d)("futu"),is_image:!0,image_width:50,image_height:50,width:60,className:"picture"},{name:"wordcode_2",label:Object(i.d)("futu"),className:"nopadding",width:self.colorsWidth},{name:"productname",label:Object(i.d)("shangpinmingcheng"),width:300,convert:function(e,t,r){return e.getName()}},{name:"ageseason",label:Object(i.d)("niandai"),type:"select",source:"ageseason",width:120},{name:"wordcode_1",label:Object(i.d)("guojima"),width:150,convert:function(e,t,r){return[e.wordcode_1,e.wordcode_2,e.wordcode_3].join(" ")},style:"font-weight:bold"},{name:"producttypeid",label:Object(i.d)("shangpinshuxing"),width:120,type:"select",source:"producttype"},{name:"factoryprice",label:Object(i.d)("chuchangjia"),width:130,convert:function(e){return[e.factorypricecurrency_label,e.factoryprice].join(" ")}},{name:"belv",label:Object(i.d)("beilv"),width:120},{name:"wordprice",label:Object(i.d)("guojilingshoujia"),width:130,convert:function(e){return[e.wordpricecurrency_label,e.wordprice].join(" ")}},{name:"zhekoulv",label:Object(i.d)("lingshoubi"),width:120,convert:function(e){return e.getZKL()}},{name:"nationalprice",label:Object(i.d)("benguolingshoujia"),width:130,convert:function(e){return[e.nationalpricecurrency_label,e.nationalprice].join(" ")}},{name:"saletypeid",label:Object(i.d)("xiaoshoushuxing"),width:120,type:"select",source:"saletype"},{name:"lingshoubi",label:Object(i.d)("lingshoubi"),width:120},{name:"series",label:Object(i.d)("xilie"),width:120},{name:"laststoragedate",label:Object(i.d)("zuihouruku"),width:120}],controller:"product",model:u.e,authname:"product",options:{rowStyle:function(e){var t=e.row;e.rowIndex;if(t&&t.saletype&&t.saletype.colortemplate)return{color:t.saletype.colortemplate.row.name_en}},pagination:{pageSize:15}}}}},beforeCreate:function(){i.a.resources={},i.a.caches={}},methods:{getColorStyle:function(e,t){return{width:"20px",height:"20px",background:'url("'+this._fileLink(e.picture)+'") no-repeat center'}},onSearch:function(e){this.form=e,this.search()},search:function(){var e=this;e.$refs.tablelist.search(e.form),e._hideDialog("search")},showFormToEdit:function(e,t){this.$refs.product.setInfo(t).then(function(e){return e.edit(!0).show()})},showFormToCreate:function(){this.$refs.productadd.show()},onPreview:function(e){s.a.show({url:e})},showFormToModifyPrice:function(){var e=this,t=e.$refs.tablelist.getSelectRows();console.log(t);var r=t.map(function(e){return e.id});e.$refs.modifyprice.show(r)},onSelectionChange:function(e){this.selected=e}}}},409:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-col",{attrs:{span:10}},[r("as-button",{attrs:{type:"primary"},on:{click:function(t){return e._showDialog("search",{width:600})}}},[e._v(e._s(e._label("chaxun")))]),e._v(" "),r("asa-button",{attrs:{type:"primary",enable:e._isAllowed("product")},on:{click:function(t){return e.showFormToCreate()}}},[e._v(e._s(e._label("button-create")))]),e._v(" "),r("asa-button",{attrs:{type:"primary",enable:e._isAllowed("product")&&e.selected.length>0},on:{click:function(t){return e.showFormToModifyPrice()}}},[e._v(e._s(e._label("xiugaijiage")))])],1)],1),e._v(" "),r("el-row",{staticClass:"product",attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("simple-admin-tablelist",e._b({ref:"tablelist",attrs:{onclickupdate:e.showFormToEdit,"is-select":!0},on:{preview:e.onPreview,"selection-change":e.onSelectionChange},scopedSlots:e._u([{key:"wordcode_2",fn:function(t){var n=t.row;return e._l(n.colors,function(t){return r("div",{key:t.id,staticClass:"color-group"},[r("div",{staticClass:"box",style:e.getColorStyle(t),on:{click:function(r){return r.stopPropagation(),e.showFormToEdit("click",t.id)}}})])})}},{key:"belv",fn:function(e){var t=e.row;return[r("sp-product-bl",{attrs:{product:t}})]}},{key:"lingshoubi",fn:function(e){var t=e.row;return[r("sp-product-lsb",{attrs:{product:t}})]}},{key:"productname",fn:function(t){var n=t.row;return[r("el-link",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.showFormToEdit(0,n)}}},[e._v(e._s(n.getName()))])]}},{key:"series",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.series,source:"series"}})]}}])},"simple-admin-tablelist",e.props,!1))],1)],1),e._v(" "),r("product",{ref:"product",on:{change:e.search}}),e._v(" "),r("productadd",{ref:"productadd",on:{change:e.search}}),e._v(" "),r("sp-image-preview"),e._v(" "),r("sp-dialog",{ref:"search"},[r("sp-product-search-form",{on:{search:e.onSearch,close:function(t){return e._hideDialog("search")}}})],1),e._v(" "),r("asa-product-modify-price",{ref:"modifyprice"})],1)},o=[],i={render:n,staticRenderFns:o};t.a=i}});
//# sourceMappingURL=7-1037.js.map