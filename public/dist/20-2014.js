webpackJsonp([20],{314:function(e,t,a){"use strict";function r(e){a(443)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(376),n=a(445),o=a(0),i=r,s=o(l.a,n.a,!1,i,null,null);t.default=s.exports},376:function(e,t,a){"use strict";var r=a(2);t.a={name:"sp-department",data:function(){return{form:{name:"",remark:"",id:""},form_create:{name:"",remark:"",up_dp_id:"",parent_name:""},data:[],defaultProps:{children:"children",label:"label"},node:"",is_save_disabled:!0,dialogTableVisible:!1}},methods:{onNodeClick:function(e,t){this.selectNode(t)},selectNode:function(e){var t=this,a=e.data;t.node=e,t.form.name=a.label,t.form.remark=a.remark,t.form.id=a.id,t.form_create.parent_name=a.label,t.form_create.up_dp_id=a.id,t.is_save_disabled=e.parent.id<=0},onEdit:function(){var e=this;e._submit("/department/edit",this.form).then(function(t){e.node.data.label=e.form.name,e.node.data.remark=e.form.remark,e.dialogTableVisible=!1})},deleteDepart:function(){var e=this;e._remove("/department/delete",{id:e.form.id}).then(function(t){t&&(r.f.deleteObject(e.node.parent.data.children,e.node.data),e.$refs.tree.setCurrentKey(e.node.parent.data.id),e.selectNode(e.node.parent))})},showDepartCreate:function(){this.form_create.name="",this.form_create.remark="",this.form_create.id="",this.dialogTableVisible=!0;var e=this;setTimeout(function(){e.$refs.ddd.focus()},200)},onCreate:function(){var e=this;e._submit("/department/add",this.form_create).then(function(){var t={};t.label=e.form_create.name,t.remark=e.form_create.remark,t.id=e.form_create.id,t.children=[],e.node.data.children.push(t),e.dialogTableVisible=!1})}},mounted:function(){var e=this;e._fetch("/department/departments",{}).then(function(t){e.data=t.data})}}},443:function(e,t,a){var r=a(444);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(75)("190914db",r,!0,{})},444:function(e,t,a){t=e.exports=a(74)(!1),t.push([e.i,".el-date-editor.el-input__inner,.user-form .el-date-editor.el-input,.user-form .el-input__inner{width:200px}",""])},445:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{width:"300px"},attrs:{span:8}},[a("el-tree",{ref:"tree",attrs:{data:e.data,"node-key":"id",props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.onNodeClick}})],1),e._v(" "),e.form.id>0?a("el-col",{attrs:{span:7}},[a("asa-button",{staticStyle:{"margin-bottom":"30px"},attrs:{enable:e._isAllowed("department")},on:{click:e.showDepartCreate}},[e._v("\n        "+e._s(e._label("depart-create"))+"\n      ")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:e._label("bumenmingcheng")}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e._label("description")}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),a("el-form-item",[a("asa-button",{attrs:{enable:e._isAllowed("department")&&!e.is_save_disabled},on:{click:e.onEdit}},[e._v("\n            "+e._s(e._label("button-save"))+"\n          ")]),e._v(" "),a("asa-button",{attrs:{enable:e._isAllowed("department")&&!e.is_save_disabled},on:{click:e.deleteDepart}},[e._v("\n            "+e._s(e._label("button-delete"))+"\n          ")])],1)],1)],1):e._e(),e._v(" "),e.form.id?e._e():a("el-col",{attrs:{span:7}},[a("el-alert",{attrs:{title:e._label("department-tip1"),type:"success",closable:!1}})],1)],1),e._v(" "),a("el-dialog",{ref:"dialog",attrs:{title:e._label("depart-create"),visible:e.dialogTableVisible,center:!0,width:"35%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-form",{attrs:{model:e.form_create,"label-width":"80px"}},[a("el-form-item",{attrs:{label:e._label("bumenmingcheng")}},[a("el-input",{ref:"ddd",model:{value:e.form_create.name,callback:function(t){e.$set(e.form_create,"name",t)},expression:"form_create.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e._label("description")}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form_create.remark,callback:function(t){e.$set(e.form_create,"remark",t)},expression:"form_create.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e._label("depart-parent")}},[a("el-input",{attrs:{disabled:""},model:{value:e.form_create.parent_name,callback:function(t){e.$set(e.form_create,"parent_name",t)},expression:"form_create.parent_name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("as-button",{attrs:{type:"primary"},on:{click:e.onCreate}},[e._v(e._s(e._label("button-ok")))]),e._v(" "),a("as-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v(e._s(e._label("button-cancel")))])],1)],1)],1)},l=[],n={render:r,staticRenderFns:l};t.a=n}});