webpackJsonp([10],{296:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(349),l=r(396),o=r(0),s=o(a.a,l.a,!1,null,null,null);t.default=s.exports},349:function(e,t,r){"use strict";var a=r(12),l=r.n(a),o=r(55),s=r.n(o),n=r(13),i=r.n(n),c=r(181),u=r.n(c),p=r(35),d=r(394),f=r(1);t.a={name:"sp-productstock",components:u()({},d.a.name,d.a),data:function(){return{form:{wordcode:"",brandid:"",brandgroupid:"",childbrand:"",productsize:"",countries:"",brandcolor:"",productparst:"",series:"",ulnarinch:"",gender:"",season:"",ageseason:"",productmemoids:"",saletypeid:"",producttypeid:""},pagination:{pageSizes:f.f.pageSizes,pageSize:10,total:0,current:1},searchresult:[],isLoading:!1,types:["1","2"],properties:["1","2"],defective_levels:["1"],productresult:[],product:""}},methods:{showDetail:function(e){var t=this;return i()(l.a.mark(function r(){var a,o,n,i,c,u,d,f,m,b;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(e),a=t,a.product=e,r.next=5,a._fetch("/productstock/searchproduct",{productid:e.productid,defective_level:e.defective_level,property:e.property});case 5:o=r.sent,n=o.data,a.productresult=[],i=!0,c=!1,u=void 0,r.prev=11,d=s()(n);case 13:if(i=(f=d.next()).done){r.next=22;break}return m=f.value,r.next=17,p.g.load({data:m,depth:2});case 17:b=r.sent,a.productresult.push(b);case 19:i=!0,r.next=13;break;case 22:r.next=28;break;case 24:r.prev=24,r.t0=r.catch(11),c=!0,u=r.t0;case 28:r.prev=28,r.prev=29,!i&&d.return&&d.return();case 31:if(r.prev=31,!c){r.next=34;break}throw u;case 34:return r.finish(31);case 35:return r.finish(28);case 36:a._showDialog("product-detail",{title:e.product.getName()});case 37:case"end":return r.stop()}},r,t,[[11,24,28,36],[29,,31,35]])}))()},handleSizeChange:function(e){this.pagination.pageSize=e,this.loadList()},handleCurrentChange:function(e){this.pagination.current=e,this.loadList()},onSearch:function(){var e=this;e.pagination.page=1,e.loadList()},loadList:function(){var e=this;if(!e.isLoading){e.isLoading=!0;var t=Object(f.h)({},e.form);t.page=e.pagination.current,t.pageSize=e.pagination.pageSize,t.type=e.typeSum,t.defective_level=e.defective_levels.join(","),t.property=e.properties.join(","),e._fetch("/productstock/search",t).then(function(t){e._hideDialog("search"),e.searchresult=[],console.log(t),t.data.data.forEach(function(r){p.h.get(r,function(r){e.searchresult.push(r),e.searchresult.length==t.data.data.length&&(e.isLoading=!1,Object(f.h)(e.pagination,t.data.pagination))},2)}),0==t.data.data.length&&(e.isLoading=!1)})}},getRowStyle:function(e){var t=e.row,r=t.product;if(r&&r.saletype&&r.saletype.colortemplate)return{color:r.saletype.colortemplate.row.name_en}}},computed:{width:function(){return 55*this.searchresult.reduce(function(e,t){var r=t.product;return Math.max(e,r.sizecontents.length)},1)},typeSum:function(){return this.types.reduce(function(e,t){return e+1*t},0)}}}},350:function(e,t,r){"use strict";t.a={name:"sp-productstock-show",props:{columns:{type:Array},stocks:{type:[Array],require:!0},type:{type:Number}},data:function(){var e=this,t={};return e.columns.forEach(function(e){t[e.id]=""}),{form:t}},methods:{update:function(e){var t=this,r=t.form;t.stocks.forEach(function(e){var a=void 0;3==t.type?a=e.number:1==t.type?a=e.number-e.reserve_number:2==t.type&&(a=e.reserve_number),r[e.sizecontentid]=a})}},watch:{type:function(){this.update()}},mounted:function(){this.update()}}},394:function(e,t,r){"use strict";var a=r(350),l=r(395),o=r(0),s=o(a.a,l.a,!1,null,null,null);t.a=s.exports},395:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sizecontent"},[r("el-row",e._l(e.columns,function(t,a){return r("el-col",{key:t.id,staticStyle:{width:"51px"},attrs:{align:"center",span:1}},[e._v(e._s(t.name))])}),1),e._v(" "),r("el-row",e._l(e.columns,function(t,a){return r("el-input",{key:t.id,staticStyle:{width:"51px"},attrs:{value:e.form[t.id],size:"mini",disabled:""}})}),1)],1)},l=[],o={render:a,staticRenderFns:l};t.a=o},396:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product",staticStyle:{width:"100%"}},[r("as-button",{attrs:{type:"primary"},on:{click:function(t){return e._showDialog("search")}}},[e._v(e._s(e._label("chaxun")))]),e._v(" "),r("sp-table",{staticStyle:{width:"100%"},attrs:{data:e.searchresult,border:"","row-style":e.getRowStyle},on:{"row-dblclick":e.showDetail}},[r("el-table-column",{attrs:{label:e._label("zhutu"),align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-product-icon",{attrs:{file:t.product.picture}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("chanpinmingcheng"),align:"center",sortable:"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(r.product.getName())+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("guojima"),align:"center",sortable:"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-product-tip",{attrs:{product:t.product}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("kucunshuliang"),width:e.width,align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("sp-productstock-show",{attrs:{columns:a.product.sizecontents,stocks:a.stocks,type:e.typeSum}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("chuchangjia"),width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(r.product.factorypricecurrency_label+" "+r.product.factoryprice)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("guojilingshoujia"),width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(r.product.wordpricecurrency_label+" "+r.product.wordprice)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("chengben"),width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("sp-select-text",{attrs:{value:a.product.costcurrency,source:"currency"}}),e._v("\n        "+e._s(a.product.cost)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("shuxing"),width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.property,source:"orderproperty"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("canpin"),width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.defective_level,source:"defectivelevel"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("xiaoshoushuxing"),width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.saletypeid,source:"saletype"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("shangpinshuxing"),width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.producttypeid,source:"producttype"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("zuihouruku"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(e._left(r.product.laststoragedate,10))+"\n      ")]}}])})],1),e._v(" "),e.searchresult.length<e.pagination.total?r("el-pagination",{attrs:{"current-page":1*e.pagination.current,"page-sizes":e.pagination.pageSizes,"page-size":1*e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:1*e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),r("sp-dialog",{ref:"search",attrs:{width:900}},[r("el-form",{staticClass:"order-form",staticStyle:{width:"100%"},attrs:{model:e.form,"label-width":"70px",inline:!1,size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-row",{attrs:{gutter:0}},[r("el-col",{staticStyle:{width:"270px"},attrs:{span:8}},[r("el-form-item",{attrs:{label:e._label("guojima"),prop:"ageseason"}},[r("el-input",{staticClass:"width2",model:{value:e.form.wordcode,callback:function(t){e.$set(e.form,"wordcode",t)},expression:"form.wordcode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("niandai"),prop:"ageseason"}},[r("simple-select",{attrs:{source:"ageseason",multiple:!0},model:{value:e.form.ageseason,callback:function(t){e.$set(e.form,"ageseason",t)},expression:"form.ageseason"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("pinpai"),prop:"brandid"}},[r("simple-select",{attrs:{source:"brand",multiple:!0},model:{value:e.form.brandid,callback:function(t){e.$set(e.form,"brandid",t)},expression:"form.brandid"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("pinlei"),prop:"brandgroupid"}},[r("simple-select",{attrs:{source:"brandgroup",multiple:!0},model:{value:e.form.brandgroupid,callback:function(t){e.$set(e.form,"brandgroupid",t)},expression:"form.brandgroupid"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("zipinlei"),prop:"childbrand"}},[r("simple-select",{ref:"childbrand",attrs:{source:"brandgroupchild",parentid:e.form.brandgroupid,multiple:!0},model:{value:e.form.childbrand,callback:function(t){e.$set(e.form,"childbrand",t)},expression:"form.childbrand"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("chandi"),prop:"countries"}},[r("simple-select",{attrs:{source:"country"},model:{value:e.form.countries,callback:function(t){e.$set(e.form,"countries",t)},expression:"form.countries"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("shangpinchicun")}},[r("simple-select",{attrs:{source:"ulnarinch",multiple:!0},model:{value:e.form.ulnarinch,callback:function(t){e.$set(e.form,"ulnarinch",t)},expression:"form.ulnarinch"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{width:"270px"},attrs:{span:8}},[r("el-form-item",{attrs:{label:e._label("shangpinmiaoshu")}},[r("simple-select",{attrs:{source:"productmemo",multiple:!0},model:{value:e.form.productmemoids,callback:function(t){e.$set(e.form,"productmemoids",t)},expression:"form.productmemoids"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("shangpinxilie")}},[r("simple-select",{ref:"series",attrs:{source:"series",parentid:e.form.brandid,multiple:!0},model:{value:e.form.series,callback:function(t){e.$set(e.form,"series",t)},expression:"form.series"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("xiaoshoushuxing")}},[r("simple-select",{attrs:{source:"saletype",multiple:!0},model:{value:e.form.saletypeid,callback:function(t){e.$set(e.form,"saletypeid",t)},expression:"form.saletypeid"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("shangpinshuxing")}},[r("simple-select",{attrs:{source:"producttype",multiple:!0},model:{value:e.form.producttypeid,callback:function(t){e.$set(e.form,"producttypeid",t)},expression:"form.producttypeid"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("xingbie")}},[r("simple-select",{attrs:{source:"gender",multiple:!0},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("jijie")}},[r("simple-select",{attrs:{source:"season2",multiple:!0},model:{value:e.form.season,callback:function(t){e.$set(e.form,"season",t)},expression:"form.season"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{width:"270px"},attrs:{span:8}},[r("el-form-item",{attrs:{label:e._label("kucunzhuangtai")}},[r("el-checkbox-group",{model:{value:e.types,callback:function(t){e.types=t},expression:"types"}},[r("el-checkbox",{attrs:{label:"1"}},[e._v(e._s(e._label("daishou")))]),e._v(" "),r("el-checkbox",{attrs:{label:"2"}},[e._v(e._s(e._label("yushou")))])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("shuxing")}},[r("el-checkbox-group",{model:{value:e.properties,callback:function(t){e.properties=t},expression:"properties"}},[r("el-checkbox",{attrs:{label:"1"}},[e._v(e._s(e._label("zicai")))]),e._v(" "),r("el-checkbox",{attrs:{label:"2"}},[e._v(e._s(e._label("daixiao")))])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("zhiliang")}},[r("el-checkbox-group",{model:{value:e.defective_levels,callback:function(t){e.defective_levels=t},expression:"defective_levels"}},[r("el-checkbox",{attrs:{label:"1"}},[e._v(e._s(e._label("hege")))]),e._v(" "),r("el-checkbox",{attrs:{label:"2"}},[e._v(e._s(e._label("cancipin")))])],1)],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{align:"center"}},[r("as-button",{attrs:{auth:"product",type:"primary","native-type":"submit"},on:{click:e.onSearch}},[e._v(e._s(e._label("chaxun")))]),e._v(" "),r("as-button",{attrs:{type:"primary"},on:{click:function(t){return e._hideDialog("search")}}},[e._v(e._s(e._label("tuichu")))])],1)],1)],1)],1),e._v(" "),r("sp-dialog",{ref:"product-detail",attrs:{width:900}},[r("sp-table",{staticStyle:{width:"100%"},attrs:{data:e.productresult,border:"","row-style":e.getRowStyle}},[r("el-table-column",{attrs:{label:e._label("cangku"),width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.warehouseid,source:"warehouse"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("guojima"),align:"center",sortable:"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){t.row;return[r("sp-product-tip",{attrs:{product:e.product.product}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("kucunshuliang"),width:"498",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("sp-productstock-show",{attrs:{columns:e.product.product.sizecontents,stocks:a.stocks,type:e.typeSum}})]}}])})],1)],1)],1)},l=[],o={render:a,staticRenderFns:l};t.a=o}});
//# sourceMappingURL=10-1031.js.map