webpackJsonp([37],{305:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(349),l=a(360),n=a(0),o=n(r.a,l.a,!1,null,null,null);t.default=o.exports},349:function(e,t,a){"use strict";var r=a(24),l=a.n(r),n=a(13),o=a.n(n),i=a(5),s=a.n(i),c=a(12),u=a.n(c),p=a(199),d=a(2),f=a(142),m=a(200);t.a={name:"asa-oms-order",components:{SpProductTip:m.a,AsaProduct:f.a,AsaButton:p.a},data:function(){return{list:[],pagination:{pageSize:5,total:0,current:1},listQuery:{},dialogVisible:!1,dialogTitle:"",form:{}}},methods:{getProductInfo:function(e){var t=this;return u()(s.a.mark(function a(){var r,l;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=t,a.next=3,r._fetch("/product/info",{id:e},{showMessage:!0});case 3:return l=a.sent,a.abrupt("return",l.data);case 5:case"end":return a.stop()}},a,t)}))()},onClick:function(e){var t=this;if(void 0==e.productid)return t.$message.error(Object(d.d)("dingdanhao")+" : "+e.orderNo+", "+Object(d.d)("product-doesnot-exist"));var a=t.getProductInfo(e.productid);t._log("最新的productInfo=",a),t.$refs.product.edit(!0).setInfo(a).then(function(e){return e.show(!1)})},handleSizeChange:function(e){this.pagination.pageSize=e,this.getOmsOrderList()},handleCurrentChange:function(e){this.pagination.current=e,this.getOmsOrderList()},showShippingDialog:function(e){this.dialogVisible=!0,this.dialogTitle=e.orderNo,this.form=e},hideShippingDialog:function(){this.dialogVisible=!1,this.getOmsOrderList()},handleDeliver:function(){var e=this,t=this,a={};a=o()({},t.form),t._confirm(Object(d.d)("tip-queren"),u()(s.a.mark(function r(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t._submit("/oms/delivery",{params:l()(a)}).then(function(e){t.hideShippingDialog(),t.getOmsOrderList()});case 1:case"end":return e.stop()}},r,e)})))},getOmsOrderList:function(){var e=this,t=o()({page:e.pagination.current,pageSize:e.pagination.pageSize},e.listQuery);e._fetch("/omsorder/page",t).then(function(t){e.list=t.data,e.pagination=t.pagination})}},created:function(){this.getOmsOrderList()}}},360:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"orderNo",align:"center",sortable:"",label:e._label("dingdanhao"),width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",align:"center",sortable:"",label:e._label("dingdanshijian"),width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productName",align:"center",label:e._label("shangpinmingcheng"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.onClick(r)}}},[e._v(e._s(r.productName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"color",align:"center",label:e._label("yansemingcheng"),width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sizecontent",align:"center",label:e._label("chima"),width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"consignee",label:e._label("consignee-info"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.consignee)),a("br"),e._v("\n        "+e._s(t.row.consignee_telephone)),a("br"),e._v("\n        "+e._s(t.row.consignee_address)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orderTotal",align:"center",sortable:"",label:e._label("dingdanjine"),width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",align:"center",sortable:"",label:e._label("order-status"),width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentStatus",align:"center",sortable:"",label:e._label("payment-status"),width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shippingStatus",align:"center",label:e._label("ship-status")},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0==t.row.isRefuse?a("as-button",{attrs:{type:"primary"},on:{click:function(a){return e.showShippingDialog(t.row)}}},[e._v("\n          "+e._s(e._label("caozuo"))+"\n        ")]):e._e(),e._v(" "),void 0!=t.row.isRefuse?a("span",[e._v("\n          "+e._s(t.row.isRefuseText)),a("br"),e._v("\n          "+e._s(t.row.isNoExpressText)),a("br"),e._v("\n          "+e._s(t.row.note)),a("br"),e._v("\n          "+e._s(t.row.shipmentCopCode)),a("br"),e._v("\n          "+e._s(t.row.trackingNumber)+"\n        ")]):e._e()]}}])})],1),e._v(" "),e.list.length<e.pagination.total?a("el-pagination",{staticStyle:{"margin-top":"16px"},attrs:{"current-page":1*e.pagination.current,"page-sizes":[5,10,20,30,50,100],"page-size":1*e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:1*e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!0,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:e._label("is-refuse-delivery")}},[a("el-select",{attrs:{placeholder:e._label("qingxuanze"),value:"",size:"small"},model:{value:e.form.isRefuse,callback:function(t){e.$set(e.form,"isRefuse",t)},expression:"form.isRefuse"}},[a("el-option",{attrs:{label:e._label("normal-delivery"),value:"0"}}),e._v(" "),a("el-option",{attrs:{label:e._label("refuse-delivery"),value:"1"}})],1)],1),e._v(" "),"0"===e.form.isRefuse?a("el-form-item",{attrs:{label:e._label("is-need-logistics")}},[a("el-select",{attrs:{placeholder:e._label("qingxuanze"),value:"",size:"small"},model:{value:e.form.isNoExpress,callback:function(t){e.$set(e.form,"isNoExpress",t)},expression:"form.isNoExpress"}},[a("el-option",{attrs:{label:e._label("normal-delivery"),value:"0"}}),e._v(" "),a("el-option",{attrs:{label:e._label("self-delivery"),value:"1"}})],1)],1):e._e(),e._v(" "),"0"===e.form.isRefuse&&"0"===e.form.isNoExpress?a("el-form-item",{attrs:{label:e._label("express-code")}},[a("el-input",{attrs:{autocomplete:"off",size:"small"},model:{value:e.form.shipmentCopCode,callback:function(t){e.$set(e.form,"shipmentCopCode",t)},expression:"form.shipmentCopCode"}})],1):e._e(),e._v(" "),"0"===e.form.isRefuse&&"0"===e.form.isNoExpress?a("el-form-item",{attrs:{label:e._label("express-number")}},[a("el-input",{attrs:{autocomplete:"off",size:"small"},model:{value:e.form.trackingNumber,callback:function(t){e.$set(e.form,"trackingNumber",t)},expression:"form.trackingNumber"}})],1):e._e(),e._v(" "),"1"===e.form.isRefuse||"1"===e.form.isNoExpress?a("el-form-item",{attrs:{label:e._label("note")}},[a("el-input",{attrs:{autocomplete:"off",size:"small"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.hideShippingDialog}},[e._v(e._s(e._label("quxiao")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleDeliver}},[e._v(e._s(e._label("queding")))])],1)],1),e._v(" "),a("asa-product",{ref:"product",on:{reloadList:e.getOmsOrderList}})],1)},l=[],n={render:r,staticRenderFns:l};t.a=n}});