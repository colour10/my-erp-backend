webpackJsonp([3],{333:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(414),a=r(528),i=r(0),o=i(n.a,a.a,!1,null,null,null);t.default=o.exports},342:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(141),a=r.n(n),i=function(e){var t={};return{get:function(r){return t[r]||(t[r]=a.a.cloneDeep(e)),t[r]},result:function(){return t}}}},343:function(e,t,r){"use strict";var n=r(56);t.a={methods:{formatNumber:function(e){return Object(n.b)(e,3)},f:function(e){return Object(n.b)(e,2)}}}},347:function(e,t,r){"use strict";t.a={inject:["bus"],data:function(){return{mypath:""}},created:function(){var e=this;e.bus.$on("close",function(t){t===e.mypath&&e.$destroy()})},beforeDestroy:function(){this.bus.$off("close")},mounted:function(){this.mypath=this.$route.path}}},349:function(e,t,r){"use strict";var n=r(5),a=r.n(n),i=r(78),o=r.n(i),l=r(12),s=r.n(l);t.a={name:"sp-order-list",props:{orderbrandid:{}},data:function(){return{tabledata:[]}},methods:{openit:function(e){this._open("/order/"+e)},show:function(){var e=this;return s()(a.a.mark(function t(){var r,n,i,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,n._fetch("/orderbrand/orderlist",{id:n.orderbrandid});case 3:i=t.sent,l=i.data,n.tabledata=[],(r=n.tabledata).push.apply(r,o()(l)),n._showDialog("dialog");case 8:case"end":return t.stop()}},t,e)}))()}}}},350:function(e,t,r){"use strict";var n=r(5),a=r.n(n),i=r(78),o=r.n(i),l=r(12),s=r.n(l);t.a={name:"sp-shipping-list",props:{orderbrandid:{}},data:function(){return{tabledata:[]}},methods:{openit:function(e){this._open("/shipping/warehousing/"+e)},show:function(){var e=this;return s()(a.a.mark(function t(){var r,n,i,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,n._fetch("/orderbrand/shippinglist",{id:n.orderbrandid});case 3:i=t.sent,l=i.data,n.tabledata=[],(r=n.tabledata).push.apply(r,o()(l)),n._showDialog("dialog");case 8:case"end":return t.stop()}},t,e)}))()}}}},362:function(e,t,r){"use strict";var n=r(349),a=r(363),i=r(0),o=i(n.a,a.a,!1,null,null,null);t.a=o.exports},363:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("sp-dialog",{ref:"dialog",staticClass:"product clearpadding",attrs:{width:"1200"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tabledata,stripe:"",border:""}},[r("el-table-column",{attrs:{label:e._label("dingdanbianhao"),align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-button",{on:{click:function(t){return e.openit(n.id)}}},[e._v(e._s(n.orderno))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("gonghuoshang"),align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;e.$index;return[r("sp-select-text",{attrs:{value:t.bookingid,source:"supplier"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("gonghuoshang"),align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;e.$index;return[r("sp-select-text",{attrs:{value:t.supplierid,source:"supplier"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("niandaijijie"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.ageseason,source:"ageseason"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("yewuleixing"),width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.bussinesstype,source:"bussinesstype"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("bizhong"),width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.currency,source:"currency"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("jine"),width:"80",align:"center",prop:"total"}}),e._v(" "),r("el-table-column",{attrs:{label:e._label("zhekoulv"),width:"80",align:"center",prop:"discount"}}),e._v(" "),r("el-table-column",{attrs:{label:e._label("dingdanriqi"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(r.maketime&&r.maketime.length>0?r.maketime.substr(0,10):"")+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("xingbie"),width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.genders,source:"gender"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("pinpai"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.brandids,source:"brand"}})]}}])})],1)],1)},a=[],i={render:n,staticRenderFns:a};t.a=i},364:function(e,t,r){"use strict";var n=r(350),a=r(365),i=r(0),o=i(n.a,a.a,!1,null,null,null);t.a=o.exports},365:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("sp-dialog",{ref:"dialog",staticClass:"product clearpadding",attrs:{width:"1000"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tabledata,stripe:"",border:""}},[r("el-table-column",{attrs:{label:e._label("rukudanhao"),align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-button",{on:{click:function(t){return e.openit(n.id)}}},[e._v(e._s(n.orderno))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("daohuocangku"),align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;e.$index;return[r("sp-select-text",{attrs:{value:t.warehouseid,source:"warehouse"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("gonghuoshang"),align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;e.$index;return[r("sp-select-text",{attrs:{value:t.supplierid,source:"supplier"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("niandaijijie"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.ageseason,source:"ageseason"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("yewuleixing"),width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.bussinesstype,source:"bussinesstype"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("status"),width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.status,source:"shippingstatus"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("fahuoriqi"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(r.maketime&&r.maketime.length>0?r.maketime.substr(0,10):"")+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("rukuriqi"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(r.warehousingtime&&r.warehousingtime.length>0?r.warehousingtime.substr(0,10):"")+"\n      ")]}}])})],1)],1)},a=[],i={render:n,staticRenderFns:a};t.a=i},414:function(e,t,r){"use strict";var n,a=r(78),i=r.n(a),o=r(6),l=r.n(o),s=r(24),u=r.n(s),c=r(22),d=r.n(c),p=r(5),f=r.n(p),b=r(12),h=r.n(b),m=r(73),v=r.n(m),_=r(38),g=r(14),w=r(343),y=r(79),k=r(54),x=r(194),S=r(77),z=r(342),$=r(347),C=r(362),j=r(364),D=r(526),O={name:"sp-orderbrandcreate",components:(n={},v()(n,C.a.name,C.a),v()(n,j.a.name,j.a),v()(n,D.a.name,D.a),n),mixins:[w.a,$.a],data:function(){var e=this;e._label;return{form:{ageseasonid:"",bookingid:"",brandid:""},form2:{supplierid:"",keyword:"",keyword1:"",suppliercode1:"",suppliercode:""},tabledata:[],details:[],orders:[],selected:[],selected2:[],suppliers:[],listdata:[],orderlist:[],orderbrandDetailList:[],refsMap:{}}},methods:{onDeleteOrder:function(e){var t=this;if(t.orderbrandDetailList.find(function(t){return t.orderid==e}))return void alert(t._label("tip-bunengshanchu"));confirm(t._label("quedingshanchu"))&&(Object(S.d)(t.orderlist,function(t){return t.orderid===e}),Object(S.d)(t.tabledata,function(t){return t.orderid===e}),Object(S.d)(t.orders,function(t){return t.id===e}),Object(S.d)(t.listdata,function(t){return t.row.orderid===e}))},onDeleteSupplier:function(e){var t=this;t.confirm()&&(Object(S.d)(t.suppliers,function(t){return t.supplierid==e}),Object(S.d)(t.listdata,function(t){return t.supplierid==e}))},setMap:function(e,t,r){this.refsMap[e]=t+"-"+r},focus:function(e,t,r){var n=this,a=this.refsMap[r];a&&n.$refs[a]&&n.$refs[a].startFocus(t,e)},cellStyle:function(){return"padding-left:0px"},addSupplier:function(){var e=this;e._dataSource("supplier_3").getRows(e.form2.supplierid).then(function(t){var r=t.map(function(e){return e.row});E(e).importSupplier(r),e._hideDialog("add-supplier")})},distribute:function(e){var t=this;t.selected2.forEach(function(r){var n=r.product.id+"-"+r.order.id;t.$refs[n].distributeTo(e)}),t._hideDialog("supplier-dialog")},resetDistribute:function(){var e=this;e.selected2.forEach(function(t){var r=t.product.id+"-"+t.order.id;e.$refs[r].reset()})},onSelect:function(){var e=this;e.doImport(e.form).then(function(){e.form.ageseasonid="",e.form.bookingid="",e.form.brandid="",e._hideDialog("order-dialog")})},doImport:function(e){var t=this;return h()(f.a.mark(function r(){var n,a,i,o;return f.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=t,r.next=3,_.a.getOrderListToImport(e);case 3:return a=r.sent,i=Object(y.a)(n.orders).toObject(function(e){return[e.id,1]}).object(),o=E(n),r.next=8,o.importOrders(a.orders.filter(function(e){return!i[e.id]}));case 8:return r.next=10,o.importDetails(a.details.filter(function(e){return!i[e.orderid]}));case 10:case"end":return r.stop()}},r,t)}))()},getInit:function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=d()(this.listdata);!(r=(i=o.next()).done);r=!0){var l=i.value;l.row===e&&l.number>0&&t.push({sizecontentid:l.sizecontentid,supplierid:l.supplierid,number:l.number})}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return t},saveOrder:function(){var e=this,t=E(e),r=[],n=!0,a=!1,i=void 0;try{for(var o,l=d()(e.listdata);!(n=(o=l.next()).done);n=!0){var s=o.value;if(s.number>0){var c=t.getOrderDetaiId(s.row.productid,s.row.orderid,s.sizecontentid),p=t.getOrderbrandDetailId(s.row.productid,s.row.orderid,s.sizecontentid,s.supplierid);r.push({productid:s.row.productid,factoryprice:s.factoryprice,wordprice:e.stat[s.row.productid].wordprice,currencyid:e.stat[s.row.productid].currencyid,orderid:s.row.orderid,sizecontentid:s.sizecontentid,supplierid:s.supplierid,number:s.number,discount:s.discount,orderdetailid:c,id:p})}}}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}var f=e.suppliers.filter(function(t){return e.supplierStat[t.supplierid].total_number>0}).map(function(t){var r=e.supplierStat[t.supplierid],n=Object(g.c)({},t);return e._log(r,n),n.total_number=r.total_number,n.total_discount_price=r.total_discount_price,n.total_price=r.total_price,n.brandid=r.brandid,n}),b={list:r,suppliers:f,form:{bussinesstype:e.order.bussinesstype,ageseason:e.order.ageseason,seasontype:e.order.seasontype,currency:e.order.currency}};e._log(b),e._submit("/orderbrand/add",{params:u()(b)}).then(function(t){e._redirect("/orderbrand/confirm/"+t.data[0])})},onNumberChange:function(e){var t=e.row,r=e.list,n=this;r.forEach(function(e){var r=e.number,a=e.sizecontentid,i=e.supplierid,o=e.discount,l=e.price,s=e.factoryprice,u=n.listdata.find(function(e){return e.sizecontentid==a&&e.supplierid==i&&t.product.id==e.row.product.id&&t.orderid==e.row.orderid});u?(u.number=r,u.discount=o,u.price=l,u.factoryprice=s,u.priceTotal=n.f(l*r)):n.listdata.push({row:t,number:r,sizecontentid:a,supplierid:i,discount:o,price:l,factoryprice:s,priceTotal:n.f(l*r)})});var a=n.listdata.shift();a&&n.listdata.unshift(a)},onSelectionChange:function(e){var t=this;this.selected=e,0==t.suppliers.length&&t.$notify.info({title:t._label("tishi"),message:t._label("qxzjghs")})},onRowClick:function(e){this.$refs.table.toggleRowSelection(e)},onSelectionChange2:function(e){this.selected2=e},isCreate:function(){return"0"==this.$route.params.ids}},computed:{canSave:function(){var e=this;if("0"!=e.$route.params.ids)return!1;var t=e.listdata.filter(function(e){return e.number>0}).length;return 0!=t&&0!=(t=e.suppliers.filter(function(t){return e.supplierStat[t.supplierid].total_number>0}).length)},orderdetails:function(){var e=this,t={};if(0==e.suppliers.length)return[];e.selected.forEach(function(e){t[e.id]=1});var r=e.form2.keyword.toUpperCase(),n=e.form2.suppliercode.toUpperCase(),a=E(e).isMatch;return e.tabledata.filter(function(i){if(1==t[i.orderid]){var o=e.listdata.find(function(e){return e.row===i});return!!(i.total>0||o)&&(a(r,i.product.getGoodsCode(""))&&a(n,i.order.booking_label.toUpperCase()))}return!1})},width:function(){return 51*this.orderdetails.reduce(function(e,t){var r=t.product;return Math.max(e,r.sizecontents.length)},1)+191+70+100},order:function(){var e=this.orders;return e.length>0?e[0]:{}},orderstat:function(){var e=this,t={};return e.orders.forEach(function(e){t[e.id]={totalCount:0,brandCount:0,leftCount:0}}),e.orderlist.forEach(function(e){var r=t[e.orderid];r.totalCount+=1*e.number,r.brandCount+=1*e.brand_number,r.leftCount=r.totalCount-r.brandCount}),e.orderbrandDetailList.forEach(function(e){t[e.orderid].leftCount+=1*e.number}),t},ordercurrent:function(){var e=this,t=e._newbox(),r=!0,n=!1,a=void 0;try{for(var i,o=d()(e.orders);!(r=(i=o.next()).done);r=!0){t[i.value.id]=0}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}var l=!0,s=!1,u=void 0;try{for(var c,p=d()(e.listdata);!(l=(c=p.next()).done);l=!0){var f=c.value;t[f.row.orderid]+=Number(f.number)}}catch(e){s=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(s)throw u}}return t},stat:function(){var e=this,t=Object(z.a)({wordprice:0,currencyid:"",total:0}),r=!0,n=!1,a=void 0;try{for(var i,o=d()(e.tabledata);!(r=(i=o.next()).done);r=!0){var l=i.value,s=t.get(l.product.id);s.currencyid=l.product.factorypricecurrency,s.wordprice=l.product.wordprice}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}var u=!0,c=!1,p=void 0;try{for(var f,b=d()(e.orderlist);!(u=(f=b.next()).done);u=!0){var h=f.value,s=t.get(h.productid);h.currencyid>0&&(s.currencyid=h.currencyid),h.wordprice>0&&(s.wordprice=h.wordprice)}}catch(e){c=!0,p=e}finally{try{!u&&b.return&&b.return()}finally{if(c)throw p}}var m=!0,v=!1,_=void 0;try{for(var g,w=d()(e.listdata);!(m=(g=w.next()).done);m=!0){var y=g.value,s=t.get(y.row.product.id);s.total+=Number(y.number)}}catch(e){v=!0,_=e}finally{try{!m&&w.return&&w.return()}finally{if(v)throw _}}return t.result()},supplierStat:function(){var e=this,t=Object(S.a)(),r=Object(z.a)({total_discount_price:0,total_number:0,total_price:0,brandid:""}),n=!0,a=!1,i=void 0;try{for(var o,l=d()(e.listdata);!(n=(o=l.next()).done);n=!0){var s=o.value,u=r.get(s.supplierid);s.number>0&&(u.total_number+=Number(s.number),u.total_price+=s.number*e.stat[s.row.productid].wordprice,u.total_discount_price+=Number(s.priceTotal),t.push(s.supplierid,s.row.product.brandid))}}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}var c=t.getResult(),p=!0,f=!1,b=void 0;try{for(var h,m=d()(e.suppliers);!(p=(h=m.next()).done);p=!0){var v=h.value,u=r.get(v.supplierid);u.brandid=c[v.supplierid]}}catch(e){f=!0,b=e}finally{try{!p&&m.return&&m.return()}finally{if(f)throw b}}return r.result()}},watch:{"form2.keyword1":function(e){this.copyKeywordDebounce()},"form2.suppliercode1":function(e){this.copySuppliercodeDebounce()}},mounted:function(){var e=this;return h()(f.a.mark(function t(){var r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e,r._setTitle(r._label("pinpaidingdanbianji")),r.copyKeywordDebounce=Object(x.b)(function(){r.form2.keyword=r.form2.keyword1},1e3,!1),r.copySuppliercodeDebounce=Object(x.b)(function(){r.form2.suppliercode=r.form2.suppliercode1},1e3,!1),E(r).loadInfo(),r._log(r.$route),!(r.$route.query.id&&r.$route.query.id>0)){t.next=11;break}return console.log(r.$route.query.id),t.next=10,r.doImport({orderid:r.$route.query.id});case 10:r.orders.length>0&&(r.$refs.table.toggleRowSelection(r.orders[0]),r.suppliers.length>0&&function(){var e=r.suppliers[0].supplierid,t=!0,n=!1,a=void 0;try{for(var i,o=d()(r.tabledata);!(t=(i=o.next()).done);t=!0){var l=i.value;!function(t){var n=t.product.id+"-"+t.order.id;setTimeout(function(){r.$refs[n].distributeTo(e)},5)}(l)}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}}());case 11:case"end":return t.stop()}},t,e)}))()}},E=function(e){var t={loadInfo:function(){var r=e.$route.params;"0"!=r.ids&&e._fetch("/orderbrand/load",{ids:r.ids}).then(function(){var r=h()(f.a.mark(function r(n){var a=n.data;return f.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.importOrders(a.orders),r.next=3,t.importDetails(a.details);case 3:t.importSupplier(a.suppliers,a.orderbrands),t.importList(a.list),e.$refs.table.toggleAllSelection(),a.orderbrands.length>0&&e._setTitle(e._label("pinpaidingdanbianji")+"ï¼š"+a.orderbrands[0].orderno);case 7:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}())},isMatch:function(e,t){return!(e.length>0)||t.toUpperCase().indexOf(e)>=0},convertListToProductList:function(e){var t=this;return h()(f.a.mark(function r(){var n,a,i,o,s,u,c,p,b,h,m;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n={},a=!0,i=!1,o=void 0,t.prev=4,s=d()(e);!(a=(u=s.next()).done);a=!0)c=u.value,p=c.productid+"-"+c.orderid,b=c.brand_number,n[p]?(n[p].form[c.sizecontentid]=c.number-b,n[p].total+=c.number-b):(h={},h[c.sizecontentid]=c.number-b,n[p]={key:p,productid:c.productid,orderid:c.orderid,discount:c.discount,total:c.number-b,factoryprice:c.factoryprice,form:h});t.next=12;break;case 8:t.prev=8,t.t0=t.catch(4),i=!0,o=t.t0;case 12:t.prev=12,t.prev=13,!a&&s.return&&s.return();case 15:if(t.prev=15,!i){t.next=18;break}throw o;case 18:return t.finish(15);case 19:return t.finish(12);case 20:return m=[],Object(y.a)(n).forEach(function(e){var t=Object(k.i)(e);e.orderid>0?t.push(k.b.load({data:e.orderid,depth:1}),"order"):e.order={id:-1},t.push(k.d.load({data:e.productid,depth:1}),"product"),m.push(t.all())}),t.next=24,l.a.all(m);case 24:return t.abrupt("return",t.sent);case 25:case"end":return t.stop()}},r,t,[[4,8,12,20],[13,,15,19]])}))()},getOrderDetaiId:function(t,r,n){var a=e.orderlist.find(function(e){return e.productid==t&&e.orderid==r&&e.sizecontentid==n});return a?a.id:0},getOrderbrandDetailId:function(t,r,n,a){var i=e.suppliers.find(function(e){return e.supplierid==a});if(i){var o=e.orderbrandDetailList.find(function(e){return e.productid==t&&e.orderid==r&&e.sizecontentid==n&&e.orderbrandid==i.orderbrandid});return o?o.id:0}return 0},importOrders:function(r){var n=this;return h()(f.a.mark(function a(){var i,o,l,s,u,c,p,b;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=!0,o=!1,l=void 0,n.prev=3,s=d()(r);case 5:if(i=(u=s.next()).done){n.next=17;break}if(c=u.value,e.orders.push(c),!(c.supplierid>0&&e.isCreate())){n.next=14;break}return n.next=11,e._dataSource("supplier_3").getRows(c.supplierid);case 11:p=n.sent,b=p.map(function(e){return e.row}),t.importSupplier(b);case 14:i=!0,n.next=5;break;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(3),o=!0,l=n.t0;case 23:n.prev=23,n.prev=24,!i&&s.return&&s.return();case 26:if(n.prev=26,!o){n.next=29;break}throw l;case 29:return n.finish(26);case 30:return n.finish(23);case 31:case"end":return n.stop()}},a,n,[[3,19,23,31],[24,,26,30]])}))()},importDetails:function(r){var n=this;return h()(f.a.mark(function a(){var o,l,s;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(o=e.orderlist).push.apply(o,i()(r)),n.next=3,t.convertListToProductList(r);case 3:s=n.sent,(l=e.tabledata).push.apply(l,i()(s));case 5:case"end":return n.stop()}},a,n)}))()},importSupplier:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!0,a=!1,i=void 0;try{for(var o,l=d()(t);!(n=(o=l.next()).done);n=!0){var s=o.value;!function(t){if(!e.suppliers.find(function(e){return e.supplierid==t.id})){var r={suppliercode:t.suppliercode,supplierid:t.id,foreignorderno:"",finalsupplierid:"",taxrebate:"1",makestaff:"",maketime:"",memo:"",orderno:"",brandid:"",quantum:""};r.discount="1",r.total_discount_price=0,r.total_number=0,r.total_price=0,r.orderbrandid="",e.suppliers.push(r)}}(s)}}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}var u=!0,c=!1,p=void 0;try{for(var f,b=d()(r);!(u=(f=b.next()).done);u=!0){var h=f.value;!function(t){var r=e.suppliers.find(function(e){return e.supplierid==t.supplierid});r&&(r.discount=t.discount,r.orderbrandid=t.id,r.makestaff=t.makestaff,r.maketime=t.maketime,r.foreignorderno=t.foreignorderno,r.finalsupplierid=t.finalsupplierid,r.taxrebate=t.taxrebate,r.memo=t.memo,r.orderno=t.orderno,r.brandid=t.brandid,r.quantum=t.quantum)}(h)}}catch(e){c=!0,p=e}finally{try{!u&&b.return&&b.return()}finally{if(c)throw p}}},importList:function(t){e.orderbrandDetailList=t;var r=!0,n=!1,a=void 0;try{for(var i,o=d()(t);!(r=(i=o.next()).done);r=!0){var l=i.value;!function(t){var r=e.tabledata.find(function(e){return e.orderid==t.orderid&&e.productid==t.productid}),n=e.suppliers.find(function(e){return e.orderbrandid==t.orderbrandid});r&&n&&e.listdata.push({row:r,number:t.number,sizecontentid:t.sizecontentid,supplierid:n.supplierid,discount:t.discount}),r&&(r.form[t.sizecontentid]+=1*t.number)}(l)}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}}};return t};t.a=O},415:function(e,t,r){"use strict";var n=r(18),a=r.n(n),i=r(76),o=r.n(i),l=r(14),s=r(79),u=r(343),c=function(e){return{forEach:function(t){Object(s.a)(e.form).forEach(function(r,n){var a=n.split("-"),i=o()(a,2),l=i[0],s=i[1],u=e.getTableRow(s);u&&t({number:r,sizecontentid:l,supplierid:s,discount:u.discount,factoryprice:e.factoryprice,price:e.dealPrice[s]})})}}};t.a={name:"sp-sizecontent-confirm2",mixins:[u.a],props:{disabled:{type:Boolean,default:!1},columns:{type:Array},row:{type:[Object],require:!0},suppliers:{},initData:{},factoryprice:{}},data:function(){var e=this,t={},r={};return e.suppliers.forEach(function(n){e.columns.forEach(function(e){t[e.id+"-"+n.supplierid]=""}),r[n.supplierid]=0}),e.initData.forEach(function(e){var r=e.supplierid,n=e.sizecontentid,a=e.number;t[n+"-"+r]=a}),{refsMap:{},form:t,totals:r,tabledata:[],sumform:{}}},methods:{setMap:function(e,t,r,n){var a=e+"-"+t;this.refsMap[a]=r+"-"+n},getDiscount:function(e){var t=this.discounts.find(function(t){return t.supplierid===e});return t?t.discount:""},getFootCellClass:function(e){return e>0?"normal":e<0?"danger":"success"},distributeTo:function(e){var t=this,r=t.form;a()(r).forEach(function(n){r[n]="";var a=n.split("-"),i=o()(a,2),l=i[0],s=i[1];e==s&&(r[n]=t.row.form[l]?t.row.form[l]:"")}),t.onChange()},onDiscountChange:function(e,t){var r=this,n=r.getTableRow(e);n&&(n.match=!1),r.onChange()},reset:function(){var e=this,t=e.form;a()(t).forEach(function(e){t[e]=""}),e.onChange()},onInputDblClick:function(e,t){var r=e+"-"+t;this.$refs[r][0].select()},onFocus:function(e){this.$refs[e][0].select()},getLineTotal:function(e){var t=0;return Object(s.a)(e).forEach(function(e){t+=1*e}),t},getBodyRowTotal:function(e){var t=0;return c(this).forEach(function(r){e==r.supplierid&&r.number>0&&(t+=1*r.number)}),t},focus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this,n=e+"-"+t;return n=r.refsMap[n],!!r.$refs[n]&&(r.$refs[n][0]?r.$refs[n][0].focus():(r.$refs[n].focus(),r.$refs[n].select()),!0)},startFocus:function(e,t){var r=this;t=t<r.columns.length?t:r.columns.length-1,"down"==e?this.focus(1,t):this.focus(this.tabledata.length-2,t)},onKeyUp:function(e,t,r){var n=this;"ArrowRight"===e.key?n.focus(t,r+1):"ArrowLeft"===e.key?n.focus(t,r-1):"ArrowUp"===e.key?!1===n.focus(t-1,r)&&n.$emit("up",r):"ArrowDown"===e.key?!1===n.focus(t+1,r)&&n.$emit("down",r):n.onChange()},onChange:function(){var e=this,t=[];c(this).forEach(function(e){t.push(e)}),e.$emit("change",{row:e.row,list:t})},rowClassName:function(e){var t=e.row;e.rowIndex;return"foot"==t.type?"sumline":""},cellClassName:function(e){var t=(e.row,e.column,e.rowIndex,e.columnIndex);return this.columns.length+2==t?"counter sumtotal":this.columns.length+1==t?"counter sumcolumn":"counter"},initTableData:function(){var e=this,t={};e.tabledata.forEach(function(e){t[e.supplierid]=Object(l.c)({},e)}),e.tabledata=[],e.tabledata.push({type:"head",form:e.row.form}),e.suppliers.forEach(function(r){var n={};e.columns.forEach(function(e){n[e.id]||(n[e.id]="")});var a={type:"body",form:n,suppliercode:r.suppliercode,supplierid:r.supplierid,taxrebate:r.taxrebate};t[r.supplierid]&&!1===t[r.supplierid].match?(a.discount=t[r.supplierid].discount,a.match=!1):(a.discount=r.discount,a.match=!0),e.tabledata.push(a)});var r=Object(l.c)({},e.row.form);c(this).forEach(function(e){var t=e.number,n=e.sizecontentid;r[n]&&r[n]>=0&&(r[n]-=t)}),e.tabledata.push({type:"foot",form:r}),e.onChange()},getTableRow:function(e){return this.tabledata.find(function(t){return"body"==t.type&&t.supplierid===e})}},computed:{sizecontentStat:function(){var e=this,t=Object(l.c)({},e.row.form);return c(this).forEach(function(e){var r=e.number,n=e.sizecontentid;t[n]||(t[n]=0),t[n]-=r}),t},supplierStat:function(){var e=this,t={};return e.tabledata.forEach(function(r){var n=r.type,a=r.supplierid,i=r.form;"body"===n?t[a]=e.getBodyRowTotal(a):t[n]=e.getLineTotal(i)}),t},dealPrice:function(){var e=this,t={};return e.tabledata.forEach(function(r){var n=r.type,a=r.supplierid,i=(r.form,r.discount),o=r.taxrebate;"body"===n&&(t[a]=0==o?0:e.f(e.factoryprice*i/o))}),t}},watch:{suppliers:{handler:function(e,t){this.initTableData()},deep:!0},factoryprice:function(){this.onChange()}},mounted:function(){this.initTableData()}}},526:function(e,t,r){"use strict";var n=r(415),a=r(527),i=r(0),o=i(n.a,a.a,!1,null,null,null);t.a=o.exports},527:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sizecontent"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tabledata,border:!1,"row-class-name":e.rowClassName,"cell-class-name":e.cellClassName}},[r("el-table-column",{attrs:{label:e._label("gonghuoshang"),align:"left",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["body"==n.type?r("div",{on:{dblclick:function(t){return e.distributeTo(n.supplierid)}}},[e._v(e._s(n.suppliercode))]):e._e(),e._v(" "),"foot"==n.type?r("span",[e._v(e._s(e._label("jiaoyan")))]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("zhekoulv"),align:"left",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,a=t.$index;return["body"==n.type?r("el-input",{ref:"xx-"+n.supplierid,staticStyle:{width:"50px"},attrs:{setmap:e.setMap(a,-1,"xx",n.supplierid),size:"mini"},on:{change:function(t){return e.onDiscountChange(n.supplierid,t)}},nativeOn:{keyup:function(t){return e.onKeyUp(t,a,-1,"xx",n.supplierid)}},model:{value:n.discount,callback:function(t){e.$set(n,"discount",t)},expression:"row.discount"}}):e._e()]}}])}),e._v(" "),e._l(e.columns,function(t,n){return r("el-table-column",{key:t.id,staticClass:"counter",attrs:{label:t.name,align:"center",width:"51"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row,o=a.$index;return["head"==i.type?r("el-input",{staticClass:"linetop",staticStyle:{width:"50px"},attrs:{size:"mini",disabled:!0},model:{value:i.form[t.id],callback:function(r){e.$set(i.form,t.id,r)},expression:"row.form[column.id]"}}):e._e(),e._v(" "),"body"==i.type?r("el-input",{ref:t.id+"-"+i.supplierid,refInFor:!0,staticStyle:{width:"50px"},attrs:{size:"mini",setmap:e.setMap(o,n,t.id,i.supplierid)},on:{focus:function(r){return e.onFocus(t.id+"-"+i.supplierid)}},nativeOn:{keyup:function(r){return e.onKeyUp(r,o,n,t.id,i.supplierid)}},model:{value:e.form[t.id+"-"+i.supplierid],callback:function(r){e.$set(e.form,t.id+"-"+i.supplierid,r)},expression:"form[column.id+'-'+row.supplierid]"}}):e._e(),e._v(" "),"foot"==i.type?r("el-input",{class:e.getFootCellClass(i.form[t.id]),staticStyle:{width:"50px"},attrs:{size:"mini",disabled:!0},model:{value:e.sizecontentStat[t.id],callback:function(r){e.$set(e.sizecontentStat,t.id,r)},expression:"sizecontentStat[column.id]"}}):e._e()]}}],null,!0)})}),e._v(" "),r("el-table-column",{attrs:{label:e._label("heji"),align:"right",width:"53"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["head"==n.type?r("el-input",{staticClass:"linetop",staticStyle:{width:"50px"},attrs:{value:e.supplierStat[n.type],size:"mini",disabled:!0}}):e._e(),e._v(" "),"body"==n.type?r("el-input",{staticClass:"inputsum",staticStyle:{width:"50px"},attrs:{value:e.supplierStat[n.supplierid],size:"mini",disabled:!0}}):e._e(),e._v(" "),"foot"==n.type?r("el-input",{class:e.getFootCellClass(e.supplierStat[n.type]),staticStyle:{width:"50px"},attrs:{value:e.getLineTotal(e.sizecontentStat),size:"mini",disabled:!0}}):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("chengjiaojia"),align:"right",width:"58"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["body"==n.type?r("el-input",{staticClass:"inputsum",staticStyle:{width:"55px"},attrs:{value:e.dealPrice[n.supplierid],size:"mini",disabled:!0}}):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("zongjia"),align:"right",width:"68"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["body"==n.type?r("el-input",{staticClass:"inputsum",staticStyle:{width:"65px"},attrs:{value:e.f(e.dealPrice[n.supplierid]*e.supplierStat[n.supplierid]),size:"mini",disabled:!0}}):e._e()]}}])})],2)],1)},a=[],i={render:n,staticRenderFns:a};t.a=i},528:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"order-form",staticClass:"order-form",staticStyle:{width:"100%"},attrs:{model:e.form,"label-width":"85px",size:"mini","inline-message":!1,"show-message":!1}},[r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{span:24}},[r("asa-button",{attrs:{enable:e.canSave},on:{click:function(t){return e.saveOrder(1)}}},[e._v(e._s(e._label("baocun")))]),e._v(" "),r("asa-button",{attrs:{enable:"0"==e.$route.params.ids},on:{click:function(t){return e._showDialog("order-dialog")}}},[e._v(e._s(e._label("daorudingdan"))+"\n        ")]),e._v(" "),r("asa-button",{attrs:{enable:"0"==e.$route.params.ids},on:{click:function(t){e._showDialog("add-supplier"),e.form2.supplierid=""}}},[e._v("\n          "+e._s(e._label("zengjiagonghuoshang"))+"\n        ")]),e._v(" "),r("asa-button",{attrs:{enable:"0"!=e.$route.params.ids},on:{click:function(t){return e.$refs.qiancha.show()}}},[e._v(e._s(e._label("qiancha")))]),e._v(" "),r("asa-button",{attrs:{enable:"0"!=e.$route.params.ids},on:{click:function(t){return e.$refs.houcha.show()}}},[e._v(e._s(e._label("houcha")))]),e._v(" "),e.order.ageseason>0?r("el-tag",{attrs:{type:"warning"}},[r("sp-select-text",{attrs:{value:e.order.ageseason,source:"ageseason"}})],1):e._e(),e._v(" "),e.order.seasontype>0?r("el-tag",{attrs:{type:"warning"}},[r("sp-select-text",{attrs:{value:e.order.seasontype,source:"seasontype"}})],1):e._e(),e._v(" "),e.order.bussinesstype>0?r("el-tag",{attrs:{type:"warning"}},[r("sp-select-text",{attrs:{value:e.order.bussinesstype,source:"bussinesstype"}})],1):e._e()],1)],1)],1),e._v(" "),r("el-row",{staticClass:"product clearpadding"},[r("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.suppliers,stripe:"",border:"","cell-style":e.cellStyle}},[r("el-table-column",{attrs:{label:e._label("gonghuoshang"),width:"120",align:"center",prop:"suppliercode"}}),e._v(" "),r("el-table-column",{attrs:{label:e._label("bizhong"),width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){t.row;return[r("sp-select-text",{attrs:{value:e.order.currency,source:"currency"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("zongjine"),width:"90",align:"center",prop:"total_discount_price"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n          "+e._s(e.f(e.supplierStat[r.supplierid].total_discount_price))+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("shengyuedu"),width:"90",align:"center",prop:"total_discount_price"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n          "+e._s(e.f(r.quantum-e.supplierStat[r.supplierid].total_discount_price))+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("zongjianshu"),width:"75",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n          "+e._s(e.supplierStat[r.supplierid].total_number)+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("lingshouzongjia"),width:"90",align:"center",prop:"total_price"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n          "+e._s(e.f(e.supplierStat[r.supplierid].total_price))+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("zhekoulv"),width:"75",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-input",{attrs:{size:"mini"},model:{value:n.discount,callback:function(t){e.$set(n,"discount",t)},expression:"row.discount"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("tuishuilv"),width:"75",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-input",{attrs:{size:"mini"},model:{value:n.taxrebate,callback:function(t){e.$set(n,"taxrebate",t)},expression:"row.taxrebate"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("edu"),width:"75",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-input",{attrs:{size:"mini"},model:{value:n.quantum,callback:function(t){e.$set(n,"quantum",t)},expression:"row.quantum"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("fahuoshang"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("simple-select",{attrs:{source:"supplier_3",clearable:!0},model:{value:n.finalsupplierid,callback:function(t){e.$set(n,"finalsupplierid",t)},expression:"row.finalsupplierid"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("beizhu"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-input",{attrs:{size:"mini"},model:{value:n.memo,callback:function(t){e.$set(n,"memo",t)},expression:"row.memo"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("haiwaidingdanhao"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-input",{attrs:{size:"mini"},model:{value:n.foreignorderno,callback:function(t){e.$set(n,"foreignorderno",t)},expression:"row.foreignorderno"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("gongsidingdanhao"),width:"80",align:"center",prop:"orderno"}}),e._v(" "),r("el-table-column",{attrs:{label:e._label("zhidanren"),width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.makestaff,source:"user"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("zhidanriqi"),width:"90",align:"center",prop:"maketime"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n          "+e._s(r.maketime&&r.maketime.length>0?r.maketime.substr(0,10):"")+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("pinpai"),width:"200",align:"left"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.brandid,source:"brand"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("caozuo"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["0"==e.$route.params.ids?r("el-button",{attrs:{type:"danger",round:"",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.onDeleteSupplier(n.supplierid)}}},[e._v(e._s(e._label("shanchu"))+"\n          ")]):e._e()]}}])})],1),e._v(" "),r("el-col",{staticClass:"product",staticStyle:{"margin-top":"2px"},attrs:{span:24}},[r("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.orders,stripe:"",border:""},on:{"selection-change":e.onSelectionChange,"row-click":e.onRowClick}},[r("el-table-column",{attrs:{type:"selection",width:30,align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"orderno",label:e._label("dingdanbianhao"),width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-order-tip",{attrs:{column:"orderno",order:t,trigger:"hover"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("dinghuokehu"),width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.bookingid,source:"supplier"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("dinghuoshuliang"),width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n            "+e._s(e.orderstat[r.id].totalCount)+"\n          ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("fenpeishuliang"),width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n            "+e._s(e.orderstat[r.id].totalCount-e.orderstat[r.id].leftCount+e.ordercurrent[r.id])+"\n          ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("gonghuoshang"),width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.supplierid,source:"supplier"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("niandai"),width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.ageseason,source:"ageseason"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("bizhong"),width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.currency,source:"currency"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"total",label:e._label("jine"),width:"90",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"discount",label:e._label("zhekoulv"),width:"90",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:e._label("xingbie"),width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.genders,source:"gender"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("yewuleixing"),width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.bussinesstype,source:"bussinesstype"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("pinpai"),width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-select-text",{attrs:{value:t.brandids,source:"brand"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("dingdanriqi"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n            "+e._s(r.maketime&&r.maketime.length>0?r.maketime.substr(0,10):"")+"\n          ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("caozuo"),width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["0"==e.$route.params.ids?r("el-button",{attrs:{type:"danger",round:"",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.onDeleteOrder(n.id)}}},[e._v(e._s(e._label("shanchu"))+"\n            ")]):e._e()]}}])})],1),e._v(" "),"0"==e.$route.params.ids?r("el-row",{attrs:{gutter:0}},[r("el-button",{attrs:{type:"warning",round:"",size:"mini"},on:{click:function(t){return e._showDialog("supplier-dialog")}}},[e._v("\n          "+e._s(e._label("piliangfenpei"))+"\n        ")]),e._v(" "),r("el-button",{attrs:{type:"warning",round:"",size:"mini"},on:{click:e.resetDistribute}},[e._v(e._s(e._label("piliangchongzhi")))])],1):e._e(),e._v(" "),r("el-table",{ref:"tabledetail",staticStyle:{width:"100%","margin-top":"2px"},attrs:{data:e.orderdetails,stripe:"",border:""},on:{"selection-change":e.onSelectionChange2}},[r("el-table-column",{attrs:{type:"selection",width:30,align:"center"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e._fileLink(t.row.product.picture),AAAA:""}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("dinghuokehu"),align:"center",width:"150"}},[r("el-table-column",{attrs:{label:e._label("dinghuokehu"),align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("sp-order-tip",{attrs:{column:"booking_label",order:t.order}})]}},{key:"header",fn:function(t){t.row;return[r("el-input",{attrs:{size:"mini"},model:{value:e.form2.suppliercode1,callback:function(t){e.$set(e.form2,"suppliercode1",t)},expression:"form2.suppliercode1"}})]}}])})],1),e._v(" "),r("el-table-column",{attrs:{label:e._label("guojima"),align:"center",width:"200"}},[r("el-table-column",{attrs:{label:e._label("guojima"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("sp-product-tip",{attrs:{product:e.row.product}})]}},{key:"header",fn:function(t){t.row;return[r("el-input",{attrs:{size:"mini"},model:{value:e.form2.keyword1,callback:function(t){e.$set(e.form2,"keyword1",t)},expression:"form2.keyword1"}})]}}])})],1),e._v(" "),r("el-table-column",{attrs:{prop:"label",label:e._label("bizhong"),width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("sp-select-text",{attrs:{value:e.stat[n.product.id].currencyid,source:"currency"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"label",label:e._label("chuchangjia"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("asa-order-input",{attrs:{size:"mini"},model:{value:n.factoryprice,callback:function(t){e.$set(n,"factoryprice",t)},expression:"row.factoryprice"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"discount",label:e._label("zhekoulv"),width:"80",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"number",label:e._label("dinggoushuliang"),align:"center",width:e.width},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,a=t.$index;return[r("sp-sizecontent-confirm2",{key:n.product.id+"-"+n.order.id,ref:n.product.id+"-"+n.order.id,attrs:{columns:n.product.sizecontents,row:n,suppliers:e.suppliers,initData:e.getInit(n),factoryprice:n.factoryprice,setMap:e.setMap(a,n.product.id,n.order.id)},on:{change:e.onNumberChange,up:function(t){return e.focus(t,"up",a-1)},down:function(t){return e.focus(t,"down",a+1)}}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e._label("chanpinmingcheng"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.product.getName())+"\n          ")]}}])})],1)],1)],1),e._v(" "),r("sp-dialog",{ref:"order-dialog"},[r("el-form",{staticStyle:{width:"100%"},attrs:{model:e.form,"label-width":"85px",inline:!1,size:"mini"}},[r("el-row",{attrs:{gutter:0}},[r("el-form-item",{attrs:{label:e._label("niandai")}},[r("simple-select",{attrs:{source:"ageseason"},model:{value:e.form.ageseasonid,callback:function(t){e.$set(e.form,"ageseasonid",t)},expression:"form.ageseasonid"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("dinghuokehu")}},[r("simple-select",{attrs:{source:"supplier_2",multiple:!0},model:{value:e.form.bookingid,callback:function(t){e.$set(e.form,"bookingid",t)},expression:"form.bookingid"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e._label("pinpai")}},[r("simple-select",{attrs:{source:"brand"},model:{value:e.form.brandid,callback:function(t){e.$set(e.form,"brandid",t)},expression:"form.brandid"}})],1)],1),e._v(" "),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{align:"center"}},[r("as-button",{attrs:{auth:"product",type:"primary"},on:{click:e.onSelect}},[e._v(e._s(e._label("daorudingdan")))]),e._v(" "),r("as-button",{attrs:{type:"primary"},on:{click:function(t){return e._hideDialog("order-dialog")}}},[e._v(e._s(e._label("tuichu")))])],1)],1)],1)],1),e._v(" "),r("sp-dialog",{ref:"add-supplier"},[r("el-form",{staticStyle:{width:"100%"},attrs:{model:e.form2,"label-width":"85px",inline:!1,size:"mini"}},[r("el-row",{attrs:{gutter:0}},[r("el-form-item",{attrs:{label:e._label("gonghuoshang")}},[r("simple-select",{attrs:{source:"supplier_3",multiple:!0},model:{value:e.form2.supplierid,callback:function(t){e.$set(e.form2,"supplierid",t)},expression:"form2.supplierid"}})],1)],1),e._v(" "),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{align:"center"}},[r("as-button",{attrs:{auth:"product",type:"primary"},on:{click:e.addSupplier}},[e._v(e._s(e._label("queding")))]),e._v(" "),r("as-button",{attrs:{type:"primary"},on:{click:function(t){return e._hideDialog("add-supplier")}}},[e._v(e._s(e._label("tuichu")))])],1)],1)],1)],1),e._v(" "),r("sp-dialog",{ref:"supplier-dialog",attrs:{title:e._label("qingxuanze")}},[r("el-row",{attrs:{gutter:0}},e._l(e.suppliers,function(t){return r("el-col",{key:t.id,attrs:{span:5}},[r("as-button",{attrs:{auth:"product",type:"primary"},on:{click:function(r){return e.distribute(t.supplierid)}}},[e._v(e._s(t.suppliercode)+"\n        ")])],1)}),1)],1),e._v(" "),r("sp-dialog",{ref:"preview"}),e._v(" "),r("sp-order-list",{ref:"qiancha",attrs:{orderbrandid:e.$route.params.ids}}),e._v(" "),r("sp-shipping-list",{ref:"houcha",attrs:{orderbrandid:e.$route.params.ids}})],1)},a=[],i={render:n,staticRenderFns:a};t.a=i}});