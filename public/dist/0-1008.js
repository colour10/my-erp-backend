webpackJsonp([0],{288:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(320),i=a(359),l=a(0),r=l(n.a,i.a,!1,null,null,null);t.default=r.exports},320:function(e,t,a){"use strict";var n=a(1),i=a(355),l=a(357);t.a={name:"sp-requisition",components:{"asa-requisition-dialog":i.a,"asa-requisition-detail-dialog":l.a},props:{},data:function(){return{props:{columns:[{name:"out_id",label:Object(n.d)("diaochuku"),type:"select",source:"warehouse"},{name:"in_id",label:Object(n.d)("diaoruku"),type:"select",source:"warehouse"},{name:"apply_staff",label:Object(n.d)("shenqingren"),type:"select",source:"user"},{name:"status",label:Object(n.d)("zhuangtai"),type:"select",source:"requisitionstatus"}],controller:"requisition"},visibleDialog:!1,info:{},rowIndex:-1,visibleDetailDialog:!1}},methods:{showForm:function(){this.visibleDialog=!0},showFormToCreate:function(){this.$router.push("/requisition/create")},showFormToEdit:function(e,t){this.$router.push("/requisition/edit/"+t.id)},onChange:function(){var e=this;e.visibleDialog=!1,e.$refs.tablelist.loadList()},onRowChange:function(){this.$refs.tablelist.loadList()},isEditable:function(e){var t=e.status;return"1"==t||""==t||!t}},computed:{},watch:{},mounted:function(){}}},321:function(e,t,a){"use strict";var n=a(26),i=a.n(n),l=a(1),r=a(173),o=a(174),s=a(175),u=(a(5),a(73));Object(u.b)("product"),Object(u.b)("warehouse");t.a={name:"asa-requisition-dialog",components:{"simple-select":r.a,"asa-select-product-dialog":o.a,search:s.a},props:{visible:{type:Boolean},data:{type:Object}},data:function(){return{form:{allin:0,out_id:"",in_id:"",memo:""},tabledata:[],dialogVisible:this.visible,lang:Object(l.d)("lang")}},methods:{onQuit:function(){this.dialogVisible=!1},onSelect:function(e){var t=this;t.tabledata.findIndex(function(t){return t.id==e.id})<0&&(e.select_number=1,e.number=1*e.number,e.in_id="",t.tabledata.unshift(e))},saveOrder:function(e){var t=this;if(confirm(t._label("order_submit_confirm"))){var a={form:t.form};a.list=t.tabledata.map(function(e){return 1==t.form.allin?{out_id:e.warehouseid,productstockid:e.id,number:e.select_number,in_id:t.form.in_id}:{out_id:e.warehouseid,productstockid:e.id,number:e.select_number,in_id:e.in_id}}),t._log(i()(a)),t._submit("/requisition/save",{params:i()(a)}).then(function(e){t.$emit("change")})}}},computed:{},watch:{dialogVisible:function(e){this.$emit("update:visible",e)},visible:function(e){this.dialogVisible=e}},mounted:function(){}}},322:function(e,t,a){"use strict";var n=a(26),i=a.n(n),l=a(1),r=a(173),o=a(174),s=a(5),u=a(73),c=Object(u.b)("product"),d=Object(u.b)("warehouse"),m=Object(u.b)("user");t.a={name:"asa-requisition-detail-dialog",components:{"simple-select":r.a,"asa-select-product-dialog":o.a},props:{visible:{type:Boolean},data:{type:Object}},data:function(){return{form:{apply_username:"",turnout_username:"",turnin_username:"",out_name:"",in_name:"",memo:"",status_name:""},rowdata:{status:"",apply_date:"",turnin_date:"",turnout_date:""},tabledata:[],dialogVisible:this.visible,lang:Object(l.d)("lang")}},methods:{onQuit:function(){this.dialogVisible=!1},getDataSource:function(){return s.b.getDataSource("requisitionstatus",Object(l.d)("lang"))},init:function(e){var t=this,a=this.form;t._log(t.rowdata,e),l.f.copyTo(e,t.rowdata),e.apply_staff&&m(e.apply_staff,function(e){return a.apply_username=e.login_name}),e.turnin_staff&&m(e.turnin_staff,function(e){return a.turnin_username=e.login_name}),e.turnout_staff&&m(e.turnout_staff,function(e){return a.turnout_username=e.login_name}),e.out_id&&d(e.out_id,function(e){return a.out_name=e.name}),e.in_id&&d(e.in_id,function(e){return a.in_name=e.name}),e.status&&t.getDataSource().getRow(e.status,function(e){return a.status_name=e.getLabel()}),e.id&&(t.tabledata=[],t._fetch("/requisition/load",{requisitionid:e.id}).then(function(e){t._log("调拨单列表",e);var a=s.b.getDataSource("sizecontent",Object(l.d)("lang"));e.data.forEach(function(e){e.sizecontentname="",a.getRow(e.sizecontentid,function(t){e.sizecontentname=t.getLabel()}),e.productname="",c(e.productid,function(t){return e.productname=t.productname}),e.number*=1,e.select_number=e.number,t.tabledata.push(e)}),t.$refs.list.$forceUpdate()}))},doAction:function(e){var t=this;if(confirm(t._label("order_submit_confirm"))){var a={id:t.data.id},n={},l=0,r=0;t.tabledata.forEach(function(e){n[e.id]=e.select_number,l+=e.select_number,r+=e.number}),a.total="",0==l?a.total="deny":r==l&&(a.total="allow"),a.list=n,t._log(i()(a)),t._submit("/requisition/"+e,{params:i()(a)}).then(function(e){t.$emit("change",e.data),t.init(e.data)})}},confirmout:function(){this.doAction("confirmout")},confirmin:function(){this.doAction("confirmin")}},computed:{},watch:{dialogVisible:function(e){this.$emit("update:visible",e)},visible:function(e){this.dialogVisible=e},data:function(e){this.init(e)}},mounted:function(){var e=this;e.init(e.data)}}},355:function(e,t,a){"use strict";var n=a(321),i=a(356),l=a(0),r=l(n.a,i.a,!1,null,null,null);t.a=r.exports},356:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.dialogVisible,center:!0,fullscreen:!0,modal:!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{staticClass:"order-form",staticStyle:{width:"100%"},attrs:{model:e.form,"label-width":"85px",inline:!0,size:"mini"}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e._label("tongyidiaoru")}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.form.allin,callback:function(t){e.$set(e.form,"allin",t)},expression:"form.allin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e._label("diaoruku")}},[a("simple-select",{attrs:{source:"warehouse",lang:e.lang,disabled:0==e.form.allin},model:{value:e.form.in_id,callback:function(t){e.$set(e.form,"in_id",t)},expression:"form.in_id"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e._label("beizhu")}},[a("el-input",{model:{value:e.form.memo,callback:function(t){e.$set(e.form,"memo",t)},expression:"form.memo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}}),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-row",{attrs:{type:"flex",justify:"start"}},[a("auth",{attrs:{auth:"requisition"}},[a("as-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveOrder(1)}}},[e._v(e._s(e._label("shenqing")))])],1),e._v(" "),a("as-button",{attrs:{type:"primary"},on:{click:e.onQuit}},[e._v(e._s(e._label("tuichu")))])],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:24}},[a("search",{on:{select:e.onSelect}})],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tabledata,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"productname",label:e._label("chanpinmingcheng"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(t.row.product.productname)+"\n                        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sizecontent_label",label:e._label("chima"),width:"100",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"warehousename",label:e._label("cangku"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(t.row.warehouse.name)+"\n                        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:e._label("kucunshuliang"),width:"200",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"select_number",label:e._label("diaorucangku"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=e.form.allin?a("simple-select",{attrs:{source:"warehouse",lang:e.lang},model:{value:t.row.in_id,callback:function(a){e.$set(t.row,"in_id",a)},expression:"scope.row.in_id"}}):e._e(),e._v(" "),1==e.form.allin?a("simple-select",{attrs:{source:"warehouse",lang:e.lang,disabled:""},model:{value:e.form.in_id,callback:function(t){e.$set(e.form,"in_id",t)},expression:"form.in_id"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"select_number",label:e._label("diaoboshuliang"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{attrs:{min:1,max:1*t.row.number},model:{value:t.row.select_number,callback:function(a){e.$set(t.row,"select_number",a)},expression:"scope.row.select_number"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e._label("caozuo"),width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("as-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteRow(t.$index,t.row)}}},[e._v(e._s(e._label("shanchu")))])]}}])})],1)],1)],1)],1)],1)},i=[],l={render:n,staticRenderFns:i};t.a=l},357:function(e,t,a){"use strict";var n=a(322),i=a(358),l=a(0),r=l(n.a,i.a,!1,null,null,null);t.a=r.exports},358:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.dialogVisible,center:!0,fullscreen:!0,modal:!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{staticClass:"order-form",staticStyle:{width:"100%"},attrs:{model:e.form,"label-width":"85px",inline:!0,size:"mini"}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e._label("shenqingren")}},[e._v("\n                        "+e._s(e.form.apply_username)+"\n                    ")]),e._v(" "),a("el-form-item",{attrs:{label:e._label("shenqingriqi")}},[e._v("\n                        "+e._s(e.rowdata.apply_date)+"\n                    ")]),e._v(" "),a("el-form-item",{attrs:{label:e._label("zhuangtai")}},[e._v("\n                        "+e._s(e.form.status_name)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e._label("chukuqueren")}},[e._v("\n                        "+e._s(e.form.turnout_username)+"\n                    ")]),e._v(" "),a("el-form-item",{attrs:{label:e._label("chukushijian")}},[e._v("\n                        "+e._s(e.rowdata.turnout_date)+"\n                    ")]),e._v(" "),a("el-form-item",{attrs:{label:e._label("diaochucangku")}},[e._v("\n                        "+e._s(e.form.out_name)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e._label("rukuqueren")}},[e._v("\n                        "+e._s(e.form.turnin_username)+"\n                    ")]),e._v(" "),a("el-form-item",{attrs:{label:e._label("rukushijian")}},[e._v("\n                        "+e._s(e.rowdata.turnin_date)+"\n                    ")]),e._v(" "),a("el-form-item",{attrs:{label:e._label("diaorucangku")}},[e._v("\n                        "+e._s(e.form.in_name)+"\n                    ")])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-row",{attrs:{type:"flex",justify:"start"}},[a("as-button",{attrs:{type:2==e.rowdata.status?"primary":"info"},on:{click:function(t){return e.saveOrder(1)}}},[e._v(e._s(e._label("zuofei")))]),e._v(" "),a("as-button",{attrs:{type:2==e.rowdata.status?"primary":"info"},on:{click:function(t){return e.confirmout()}}},[e._v(e._s(e._label("chukuqueren")))]),e._v(" "),a("as-button",{attrs:{type:3==e.rowdata.status?"primary":"info"},on:{click:function(t){return e.confirmin()}}},[e._v(e._s(e._label("rukuqueren")))])],1),e._v(" "),a("el-row",[a("as-button",{attrs:{type:"primary"},on:{click:e.onQuit}},[e._v(e._s(e._label("tuichu")))])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{ref:"list",staticStyle:{width:"100%"},attrs:{data:e.tabledata,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"productname",label:e._label("chanpinmingcheng"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sizecontentname",label:e._label("chima"),width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(t.row.sizecontentname)+"\n                        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:e._label("diaoboshuliang"),width:"200",align:"center"}}),e._v(" "),e.rowdata.status>2?a("el-table-column",{key:"1",attrs:{prop:"out_number",label:e._label("chukushuliang"),width:"200",align:"center"}}):e._e(),e._v(" "),5==e.rowdata.status?a("el-table-column",{key:"2",attrs:{prop:"in_number",label:e._label("rukushuliang"),width:"200",align:"center"}}):e._e(),e._v(" "),2==e.rowdata.status?a("el-table-column",{key:"3",attrs:{label:e._label("chukushuliang"),width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{attrs:{min:0,max:1*t.row.number},model:{value:t.row.select_number,callback:function(a){e.$set(t.row,"select_number",a)},expression:"scope.row.select_number"}})]}}],null,!1,3985797177)}):e._e(),e._v(" "),3==e.rowdata.status?a("el-table-column",{key:"4",attrs:{label:e._label("rukushuliang"),width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{attrs:{min:0,max:1*t.row.out_number},model:{value:t.row.select_number,callback:function(a){e.$set(t.row,"select_number",a)},expression:"scope.row.select_number"}})]}}],null,!1,3291619112)}):e._e()],1)],1)],1)],1)],1)},i=[],l={render:n,staticRenderFns:i};t.a=l},359:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:2}},[a("auth",{attrs:{auth:"requisition"}},[a("as-button",{attrs:{type:"primary"},on:{click:function(t){return e.showFormToCreate()}}},[e._v(e._s(e._label("xinjian")))])],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("simple-admin-tablelist",e._b({ref:"tablelist",attrs:{onclickupdate:e.showFormToEdit,isdelete:!1}},"simple-admin-tablelist",e.props,!1))],1)],1)],1)},i=[],l={render:n,staticRenderFns:i};t.a=l}});
//# sourceMappingURL=0-1008.js.map